shadow$provide.module$node_modules$react_moveable$dist$moveable_cjs=function(global,require,module,exports){function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function prefix(){for(var classNames=[],_i=0;_i<arguments.length;_i++)classNames[_i]=arguments[_i];return frameworkUtils.prefixNames.apply(void 0,["moveable-"].concat(classNames))}function getTransformMatrix(transform){return transform&&"none"!==
transform?utils.isObject(transform)?transform:utils.splitBracket(transform).value.split(/s*,\s*/g).map(function(v){return parseFloat(v)}):[1,0,0,1,0,0]}function getAbsoluteMatrix(matrix$1,n,origin){return matrix$jscomp$0.multiplies(n,matrix$jscomp$0.createOriginMatrix(origin,n),matrix$1,matrix$jscomp$0.createOriginMatrix(origin.map(function(a){return-a}),n))}function getBeforeTransformOrigin(el){return getTransformOrigin(window.getComputedStyle(el,":before")).map(function(o,i){var _a=utils.splitUnit(o);
o=_a.value;i="%"===_a.unit?el.ownerSVGElement.viewBox.baseVal[0===i?"width":"height"]/100:1;return o*i})}function getTransformOrigin(style){return(style=style.transformOrigin)?style.split(" "):["0","0"]}function getOffsetInfo(el,lastParent,isParent){var body=document.body;el=!el||isParent?el:el.parentElement;isParent=!1;for(var position="relative";el&&el!==body;){lastParent===el&&(isParent=!0);position=window.getComputedStyle(el,void 0);var transform=position.transform;position=position.position;
if("static"!==position||transform&&"none"!==transform)break;el=el.parentElement;position="relative"}return{isStatic:"static"===position,isEnd:isParent||!el||el===body,offsetParent:el||body}}function caculateMatrixStack(target,container,prevMatrix,prevN){var el=target,matrixes=[],isSVGGraphicElement="svg"!==el.tagName.toLowerCase()&&"ownerSVGElement"in el,originalContainer=container||document.body,isEnd=!1,is3d=!1,n=3,transformOrigin,targetMatrix,offsetContainer=getOffsetInfo(container,container,!0).offsetParent;
prevMatrix&&(container=target.parentElement);for(;el&&!isEnd;){var _a=window.getComputedStyle(el,void 0);var tagName=el.tagName.toLowerCase(),position=_a.position;target="fixed"===position;var matrix$1$jscomp$0=matrix$jscomp$0.convertCSStoMatrix(getTransformMatrix(_a.transform));if(!is3d&&16===matrix$1$jscomp$0.length){is3d=!0;n=4;for(var matrixesLength=matrixes.length,i$jscomp$0=0;i$jscomp$0<matrixesLength;++i$jscomp$0)matrixes[i$jscomp$0]=matrix$jscomp$0.convertDimension(matrixes[i$jscomp$0],3,
4)}is3d&&9===matrix$1$jscomp$0.length&&(matrix$1$jscomp$0=matrix$jscomp$0.convertDimension(matrix$1$jscomp$0,3,4));matrixesLength=el.offsetLeft;i$jscomp$0=el.offsetTop;if(target){var containerRect=(container||document.documentElement).getBoundingClientRect();matrixesLength-=containerRect.left;i$jscomp$0-=containerRect.top}var isSVG=utils.isUndefined(matrixesLength);containerRect=isSVG;var origin=void 0;containerRect&&"svg"!==tagName?(origin=isWebkit?getBeforeTransformOrigin(el):getTransformOrigin(_a).map(function(pos){return parseFloat(pos)}),
containerRect=!1,"g"===tagName?i$jscomp$0=matrixesLength=0:(_a=getSVGGraphicsOffset(el,origin),matrixesLength=_a[0],i$jscomp$0=_a[1],origin[0]=_a[2],origin[1]=_a[3])):origin=getTransformOrigin(_a).map(function(pos){return parseFloat(pos)});"svg"===tagName&&targetMatrix&&matrixes.push(getSVGMatrix(el,n),matrix$jscomp$0.createIdentityMatrix(n));var _b=getOffsetInfo(el,container);tagName=_b.offsetParent;_a=_b.isEnd;_b=_b.isStatic;isWebkit&&!containerRect&&!isSVG&&_b&&"relative"===position&&(matrixesLength-=
tagName.offsetLeft,i$jscomp$0-=tagName.offsetTop,isEnd=isEnd||_a);isSVG=position=0;containerRect||offsetContainer===tagName||(position=tagName.clientLeft,isSVG=tagName.clientTop);matrixes.push(getAbsoluteMatrix(matrix$1$jscomp$0,n,origin),matrix$jscomp$0.createOriginMatrix([containerRect?el:matrixesLength-el.scrollLeft+position,containerRect?origin:i$jscomp$0-el.scrollTop+isSVG],n));targetMatrix||(targetMatrix=matrix$1$jscomp$0);transformOrigin||(transformOrigin=origin);if(isEnd||target)break;else el=
tagName,isEnd=_a}var mat=prevMatrix?matrix$jscomp$0.convertDimension(prevMatrix,prevN,n):matrix$jscomp$0.createIdentityMatrix(n),beforeMatrix=prevMatrix?matrix$jscomp$0.convertDimension(prevMatrix,prevN,n):matrix$jscomp$0.createIdentityMatrix(n),offsetMatrix=matrix$jscomp$0.createIdentityMatrix(n),length=matrixes.length,endContainer=getOffsetInfo(originalContainer,originalContainer,!0).offsetParent;matrixes.reverse();matrixes.forEach(function(matrix$1,i){length-2===i&&(beforeMatrix=mat.slice());length-
1===i&&(offsetMatrix=mat.slice());utils.isObject(matrix$1[n-1])&&(i=getSVGOffset(matrix$1[n-1],endContainer,n,matrix$1[2*n-1],mat,matrixes[i+1]),matrix$1[n-1]=i[0],matrix$1[2*n-1]=i[1]);mat=matrix$jscomp$0.multiply(mat,matrix$1,n)});container=(!isSVGGraphicElement&&is3d?"matrix3d":"matrix")+"("+matrix$jscomp$0.convertMatrixtoCSS(isSVGGraphicElement&&16===targetMatrix.length?matrix$jscomp$0.convertDimension(targetMatrix,4,3):targetMatrix)+")";return[beforeMatrix,offsetMatrix,mat,targetMatrix,container,
transformOrigin,is3d]}function getSVGMatrix(el,n){var clientWidth=el.clientWidth,clientHeight=el.clientHeight,viewBox=el.viewBox.baseVal,viewBoxWidth=viewBox.width||clientWidth;viewBox=viewBox.height||clientHeight;var scaleX=clientWidth/viewBoxWidth,scaleY=clientHeight/viewBox;el=el.preserveAspectRatio.baseVal;var align=el.align,meetOrSlice=el.meetOrSlice;el=[0,0];var scale=[scaleX,scaleY],translate=[0,0];if(1!==align){var xAlign=(align-2)%3;align=Math.floor((align-2)/3);el[0]=viewBoxWidth*xAlign/
2;el[1]=viewBox*align/2;scaleX=2===meetOrSlice?Math.max(scaleY,scaleX):Math.min(scaleX,scaleY);scale[0]=scaleX;scale[1]=scaleX;translate[0]=(clientWidth-viewBoxWidth)/2*xAlign;translate[1]=(clientHeight-viewBox)/2*align}clientWidth=matrix$jscomp$0.createScaleMatrix(scale,n);clientWidth[n-1]=translate[0];clientWidth[2*n-1]=translate[1];return getAbsoluteMatrix(clientWidth,n,el)}function getSVGGraphicsOffset(el,origin){if(!el.getBBox)return[0,0];var bbox=el.getBBox(),viewBox=el.ownerSVGElement.viewBox.baseVal;
el=bbox.x-viewBox.x;bbox=bbox.y-viewBox.y;return[el,bbox,origin[0]-el,origin[1]-bbox]}function caculatePosition(matrix$1,pos,n){return matrix$jscomp$0.caculate(matrix$1,matrix$jscomp$0.convertPositionMatrix(pos,n),n)}function caculatePoses(matrix,width,height,n){var pos1=caculatePosition(matrix,[0,0],n),pos2=caculatePosition(matrix,[width,0],n),pos3=caculatePosition(matrix,[0,height],n);matrix=caculatePosition(matrix,[width,height],n);return[pos1,pos2,pos3,matrix]}function getRect(poses){var posesX=
poses.map(function(pos){return pos[0]}),posesY=poses.map(function(pos){return pos[1]});poses=Math.min.apply(Math,posesX);var top=Math.min.apply(Math,posesY);posesX=Math.max.apply(Math,posesX);posesY=Math.max.apply(Math,posesY);return{left:poses,top:top,right:posesX,bottom:posesY,width:posesX-poses,height:posesY-top}}function caculateRect(matrix,width,height,n){matrix=caculatePoses(matrix,width,height,n);return getRect(matrix)}function getSVGOffset(el,container,n,origin,beforeMatrix,absoluteMatrix){var _b=
getSize(el),width=_b[0];_b=_b[1];var containerRect=container.getBoundingClientRect(),rect=el.getBoundingClientRect();el=rect.left-containerRect.left+container.scrollLeft;container=rect.top-containerRect.top+container.scrollTop;containerRect=rect.width;rect=rect.height;var mat=matrix$jscomp$0.multiplies(n,beforeMatrix,absoluteMatrix),_c=caculateRect(mat,width,_b,n);var _a=_c.left;var prevTop=_c.top,prevWidth=_c.width;_c=_c.height;origin=caculatePosition(mat,origin,n);_a=matrix$jscomp$0.minus(origin,
[_a,prevTop]);containerRect=[el+_a[0]*containerRect/prevWidth,container+_a[1]*rect/_c];rect=[0,0];for(prevWidth=0;10>++prevWidth;){_a=matrix$jscomp$0.invert(beforeMatrix,n);_a=matrix$jscomp$0.minus(caculatePosition(_a,containerRect,n),caculatePosition(_a,origin,n));rect[0]=_a[0];rect[1]=_a[1];_a=matrix$jscomp$0.multiplies(n,beforeMatrix,matrix$jscomp$0.createOriginMatrix(rect,n),absoluteMatrix);prevTop=caculateRect(_a,width,_b,n);_a=prevTop.left-el;prevTop=prevTop.top-container;if(2>Math.abs(_a)&&
2>Math.abs(prevTop))break;containerRect[0]-=_a;containerRect[1]-=prevTop}return rect.map(function(p){return Math.round(p)})}function caculateMoveablePosition(matrix$1,origin,width,height){var n=16===matrix$1.length?4:3,_a=caculatePoses(matrix$1,width,height,n);height=_a[0];width=height[0];height=height[1];var _c=_a[1],x2=_c[0];_c=_c[1];var _d=_a[2],x3=_d[0];_d=_d[1];var _e=_a[3];_a=_e[0];_e=_e[1];origin=caculatePosition(matrix$1,origin,n);matrix$1=origin[0];origin=origin[1];n=Math.min(width,x2,x3,
_a);var top=Math.min(height,_c,_d,_e),right=Math.max(width,x2,x3,_a),bottom=Math.max(height,_c,_d,_e);width=width-n||0;x2=x2-n||0;x3=x3-n||0;_a=_a-n||0;height=height-top||0;_c=_c-top||0;_d=_d-top||0;_e=_e-top||0;matrix$1=matrix$1-n||0;origin=origin-top||0;var center=[(width+x2+x3+_a)/4,(height+_c+_d+_e)/4],pos1Rad=matrix$jscomp$0.getRad(center,[width,height]);center=matrix$jscomp$0.getRad(center,[x2,_c]);return[[n,top,right,bottom],[matrix$1,origin],[width,height],[x2,_c],[x3,_d],[_a,_e],pos1Rad<
center&&center-pos1Rad<Math.PI||pos1Rad>center&&center-pos1Rad<-Math.PI?1:-1]}function getLineStyle(pos1,pos2){var distX=pos2[0]-pos1[0],distY=pos2[1]-pos1[1];distX=Math.sqrt(distX*distX+distY*distY);pos2=matrix$jscomp$0.getRad(pos1,pos2);return{transform:"translate("+pos1[0]+"px, "+pos1[1]+"px) rotate("+pos2+"rad)",width:distX+"px"}}function getControlTransform(rotation){for(var poses=[],_i=1;_i<arguments.length;_i++)poses[_i-1]=arguments[_i];var length=poses.length;_i=poses.reduce(function(prev,
pos){return prev+pos[0]},0)/length;poses=poses.reduce(function(prev,pos){return prev+pos[1]},0)/length;return{transform:"translate("+_i+"px, "+poses+"px) rotate("+rotation+"rad)"}}function getCSSSize(target){target=window.getComputedStyle(target);return[parseFloat(target.width),parseFloat(target.height)]}function getSize(target,style,isOffset,isBoxSizing){void 0===style&&(style=window.getComputedStyle(target));void 0===isBoxSizing&&(isBoxSizing=isOffset||"border-box"===style.boxSizing);var width=
target.offsetWidth,height=target.offsetHeight,hasOffset=!utils.isUndefined(width);if((isOffset||isBoxSizing)&&hasOffset)return[width,height];width=target.clientWidth;height=target.clientHeight;if(!hasOffset&&!width&&!height)return width=target.getBBox(),[width.width,width.height];if(isOffset||isBoxSizing)return target=parseFloat(style.borderLeftWidth)||0,isOffset=parseFloat(style.borderRightWidth)||0,isBoxSizing=parseFloat(style.borderTopWidth)||0,style=parseFloat(style.borderBottomWidth)||0,[width+
target+isOffset,height+isBoxSizing+style];target=parseFloat(style.paddingLeft)||0;isOffset=parseFloat(style.paddingRight)||0;isBoxSizing=parseFloat(style.paddingTop)||0;style=parseFloat(style.paddingBottom)||0;return[width-target-isOffset,height-isBoxSizing-style]}function getRotationRad(poses,direction){return matrix$jscomp$0.getRad(0<direction?poses[0]:poses[1],0<direction?poses[1]:poses[0])}function getTargetInfo(target,container,parentContainer,state){var _b,top=_b=0,right=0;var _d=0;var origin=
[0,0],pos1=[0,0],pos2=[0,0],pos3=[0,0],pos4=[0,0],offsetMatrix=matrix$jscomp$0.createIdentityMatrix(3),beforeMatrix=matrix$jscomp$0.createIdentityMatrix(3),matrix$1=matrix$jscomp$0.createIdentityMatrix(3),targetMatrix=matrix$jscomp$0.createIdentityMatrix(3),width=0;var _a=0;var transformOrigin=[0,0],direction=1,beforeDirection=1,is3d=!1,targetTransform="",beforeOrigin=[0,0],clientRect=resetClientRect(),containerRect=resetClientRect(),rotation=0;var _e=state?state.beforeMatrix:void 0;var prevN=state?
state.is3d?4:3:void 0;target&&(state?(width=state.width,_a=state.height):(offsetMatrix=window.getComputedStyle(target,void 0),width=target.offsetWidth,_a=target.offsetHeight,utils.isUndefined(width)&&(_a=getSize(target,offsetMatrix,!0),width=_a[0],_a=_a[1])),_b=caculateMatrixStack(target,container,_e,prevN),beforeMatrix=_b[0],offsetMatrix=_b[1],matrix$1=_b[2],targetMatrix=_b[3],targetTransform=_b[4],transformOrigin=_b[5],is3d=_b[6],container=caculateMoveablePosition(matrix$1,transformOrigin,width,
_a),_d=container[0],_b=_d[0],top=_d[1],right=_d[2],_d=_d[3],origin=container[1],pos1=container[2],pos2=container[3],pos3=container[4],pos4=container[5],direction=container[6],_e=caculateMoveablePosition(offsetMatrix,matrix$jscomp$0.plus(transformOrigin,matrix$jscomp$0.getOrigin(targetMatrix,is3d?4:3)),width,_a),container=_e[0],beforeOrigin=_e[1],beforeDirection=_e[6],beforeOrigin=[beforeOrigin[0]+container[0]-_b,beforeOrigin[1]+container[1]-top],clientRect=getClientRect(target),containerRect=getClientRect(getOffsetInfo(parentContainer,
parentContainer,!0).offsetParent||document.body),rotation=getRotationRad([pos1,pos2],direction));return{rotation:rotation,containerRect:containerRect,beforeDirection:beforeDirection,direction:direction,target:target,left:_b,top:top,right:right,bottom:_d,pos1:pos1,pos2:pos2,pos3:pos3,pos4:pos4,width:width,height:_a,beforeMatrix:beforeMatrix,matrix:matrix$1,targetTransform:targetTransform,offsetMatrix:offsetMatrix,targetMatrix:targetMatrix,is3d:is3d,beforeOrigin:beforeOrigin,origin:origin,transformOrigin:transformOrigin,
clientRect:clientRect}}function resetClientRect(){return{left:0,right:0,top:0,width:0,height:0,bottom:0}}function getClientRect(el){el=el.getBoundingClientRect();return{left:el.left,right:el.right,top:el.top,bottom:el.bottom,width:el.width,height:el.height}}function getDirection(target){if(target&&(target=target.getAttribute("data-direction"))){var dir=[0,0];-1<target.indexOf("w")&&(dir[0]=-1);-1<target.indexOf("e")&&(dir[0]=1);-1<target.indexOf("n")&&(dir[1]=-1);-1<target.indexOf("s")&&(dir[1]=1);
return dir}}function getAbsolutePoses(poses,dist){return[matrix$jscomp$0.plus(dist,poses[0]),matrix$jscomp$0.plus(dist,poses[1]),matrix$jscomp$0.plus(dist,poses[2]),matrix$jscomp$0.plus(dist,poses[3])]}function getAbsolutePosesByState(_a){return getAbsolutePoses([_a.pos1,_a.pos2,_a.pos3,_a.pos4],[_a.left,_a.top])}function roundSign(num){return Math.round(-.5===num%1?num-1:num)}function throttle(num,unit){return unit?Math.round(num/unit)*unit:num}function throttleArray(nums,unit){nums.forEach(function(_,
i){nums[i]=throttle(nums[i],unit)});return nums}function unset(self,name){self[name]&&(self[name].unset(),self[name]=null)}function getOrientationDirection(pos,pos1,pos2){return(pos[0]-pos1[0])*(pos2[1]-pos1[1])-(pos[1]-pos1[1])*(pos2[0]-pos1[0])}function isInside(pos,pos1,pos2,pos3,pos4){var k1=getOrientationDirection(pos,pos1,pos2),k2=getOrientationDirection(pos,pos2,pos4),k3=getOrientationDirection(pos,pos4,pos1);pos1=getOrientationDirection(pos,pos2,pos4);pos4=getOrientationDirection(pos,pos4,
pos3);pos=getOrientationDirection(pos,pos3,pos2);k1=[k1,k2,k3];k2=[pos1,pos4,pos];return k1.every(function(sign){return 0<=sign})||k1.every(function(sign){return 0>=sign})||k2.every(function(sign){return 0<=sign})||k2.every(function(sign){return 0>=sign})?!0:!1}function fillParams(moveable,e,params){var datas=e.datas;datas.datas||(datas.datas={});return __assign({},params,{target:moveable.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:moveable,datas:datas.datas})}
function triggerEvent(moveable,name,params){return moveable.triggerEvent(name,params)}function filterAbles(ables,methods){var enabledAbles={},ableGroups={};return ables.filter(function(able){var name=able.name;if(enabledAbles[name]||!methods.some(function(method){return able[method]}))return!1;if(able.ableGroup){if(ableGroups[name])return!1;ableGroups[name]=!0}return enabledAbles[name]=!0})}function equals(a1,a2){return a1===a2?!0:null==a1&&null==a2?!0:!1}function selectValue(){for(var values=[],
_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];_i=values.length-1;for(var i=0;i<_i;++i){var value=values[i];if(!utils.isUndefined(value))return value}return values[_i]}function triggerRenderStart(moveable,isGroup,e){e=fillParams(moveable,e,{isPinch:!!e.isPinch});isGroup&&(e.targets=moveable.props.targets);moveable.triggerEvent("onRender"+(isGroup?"Group":"")+"Start",e)}function triggerRender(moveable,isGroup,e){e=fillParams(moveable,e,{isPinch:!!e.isPinch});isGroup&&(e.targets=moveable.props.targets);
moveable.triggerEvent("onRender"+(isGroup?"Group":""),e)}function triggerRenderEnd(moveable,isGroup,e){e=fillParams(moveable,e,{isPinch:!!e.sPinch,isDrag:e.isDrag});isGroup&&(e.targets=moveable.props.targets);moveable.triggerEvent("onRender"+(isGroup?"Group":"")+"End",e)}function triggerAble(moveable,ableType,eventOperation,eventAffix,eventType,e){var isStart="Start"===eventType;if(isStart&&-1<eventAffix.indexOf("Control")&&moveable.areaElement===e.inputEvent.target)return!1;var eventName=""+eventOperation+
eventAffix+eventType,conditionName=""+eventOperation+eventAffix+"Condition",isEnd="End"===eventType,isAfter=-1<eventType.indexOf("After");isStart&&moveable.updateRect(eventType,!0,!1);var isGroup=-1<eventAffix.indexOf("Group"),events=moveable[ableType].filter(function(able){return able[eventName]}),results=events.filter(function(able){var condition=isStart&&able[conditionName];return!condition||condition(e.inputEvent.target,moveable)?able[eventName](moveable,e):!1}),isUpdate=results.length;if(isStart){if(events.length&&
!isUpdate)return moveable.state.dragger=null,moveable.moveables&&moveable.moveables.forEach(function(childeMoveable){childeMoveable.state.dragger=null}),!1;triggerRenderStart(moveable,isGroup,e)}else isEnd?triggerRenderEnd(moveable,isGroup,e):isUpdate&&triggerRender(moveable,isGroup,e);isEnd&&(moveable.state.dragger=null);!isStart&&isUpdate&&(results.some(function(able){return able.updateRect})&&!isGroup?moveable.updateRect(eventType,!1,!1):moveable.updateRect(eventType,!0,!1));(!isStart&&isUpdate||
isEnd&&!isUpdate)&&moveable.forceUpdate();isStart||isEnd||isAfter||!isUpdate||triggerAble(moveable,ableType,eventOperation,eventAffix,eventType+"After",e)}function getAbleDragger(moveable,target,ableType,eventAffix){var options={container:window,pinchThreshold:moveable.props.pinchThreshold};["drag","pinch"].forEach(function(eventOperation){["Start","","End"].forEach(function(eventType){options[""+eventOperation+eventType.toLowerCase()]=function(e){return triggerAble(moveable,ableType,eventOperation,
eventAffix,eventType,e)}})});return new Dragger(target,options)}function renderLine(direction,pos1,pos2,index){return React$jscomp$0.createElement("div",{key:"line"+index,className:prefix("line","direction",direction),"data-direction":direction,style:getLineStyle(pos1,pos2)})}function getRotatiion(touches){return matrix$jscomp$0.getRad([touches[0].clientX,touches[0].clientY],[touches[1].clientX,touches[1].clientY])/Math.PI*180}function triggerChildAble(moveable,able,type,datas,eachEvent,callback){var name=
able.name,ableDatas=datas[name]||(datas[name]=[]),isEnd=!!type.match(/End$/g);return moveable.moveables.map(function(child,i){var childDatas=ableDatas[i]||(ableDatas[i]={}),childEvent=utils.isFunction(eachEvent)?eachEvent(child,childDatas):eachEvent;(childEvent=able[type](child,__assign({},childEvent,{datas:childDatas,parentFlag:!0})))&&callback&&callback(child,childDatas,childEvent,i);isEnd&&(child.state.dragger=null);return childEvent})}function directionCondition(target){return utils.hasClass(target,
prefix("direction"))}function setDragStart(moveable,_a){_a=_a.datas;var _b=moveable.state;moveable=_b.matrix;var beforeMatrix=_b.beforeMatrix,is3d=_b.is3d,left=_b.left,top=_b.top,origin=_b.origin,offsetMatrix=_b.offsetMatrix,targetMatrix=_b.targetMatrix;_b=_b.transformOrigin;var n=is3d?4:3;_a.is3d=is3d;_a.matrix=moveable;_a.targetMatrix=targetMatrix;_a.beforeMatrix=beforeMatrix;_a.offsetMatrix=offsetMatrix;_a.transformOrigin=_b;_a.inverseMatrix=matrix$jscomp$0.invert(moveable,n);_a.inverseBeforeMatrix=
matrix$jscomp$0.invert(beforeMatrix,n);_a.absoluteOrigin=matrix$jscomp$0.convertPositionMatrix(matrix$jscomp$0.plus([left,top],origin),n);_a.startDragBeforeDist=matrix$jscomp$0.caculate(_a.inverseBeforeMatrix,_a.absoluteOrigin,n);_a.startDragDist=matrix$jscomp$0.caculate(_a.inverseMatrix,_a.absoluteOrigin,n)}function getDragDist(_a,isBefore){var datas=_a.datas,inverseBeforeMatrix=datas.inverseBeforeMatrix,inverseMatrix=datas.inverseMatrix,startDragBeforeDist=datas.startDragBeforeDist,startDragDist=
datas.startDragDist,n=datas.is3d?4:3;return matrix$jscomp$0.minus(matrix$jscomp$0.caculate(isBefore?inverseBeforeMatrix:inverseMatrix,matrix$jscomp$0.plus(datas.absoluteOrigin,[_a.distX,_a.distY]),n),isBefore?startDragBeforeDist:startDragDist)}function caculateTransformOrigin(transformOrigin,width,height,prevWidth,prevHeight,prevOrigin){void 0===prevWidth&&(prevWidth=width);void 0===prevHeight&&(prevHeight=height);void 0===prevOrigin&&(prevOrigin=[0,0]);return transformOrigin?transformOrigin.map(function(pos,
i){var _a=utils.splitUnit(pos),value=_a.value;_a=_a.unit;var prevSize=i?prevHeight:prevWidth,size=i?height:width;return"%"===pos||isNaN(value)?size*(prevSize?prevOrigin[i]/prevSize:0):"%"!==_a?value:size*value/100}):prevOrigin}function getPosIndexesByDirection(direction){var indexes=[];0<=direction[1]&&(0<=direction[0]&&indexes.push(3),0>=direction[0]&&indexes.push(2));0>=direction[1]&&(0<=direction[0]&&indexes.push(1),0>=direction[0]&&indexes.push(0));return indexes}function getPosesByDirection(poses,
direction){return getPosIndexesByDirection(direction).map(function(index){return poses[index]})}function getPosByDirection(poses,direction){poses=getPosesByDirection(poses,direction);return[matrix$jscomp$0.average.apply(void 0,poses.map(function(pos){return pos[0]})),matrix$jscomp$0.average.apply(void 0,poses.map(function(pos){return pos[1]}))]}function getPosByReverseDirection(_a,direction){return getPosByDirection([_a[3],_a[2],_a[1],_a[0]],direction)}function getStartPos(poses,direction){return getPosByReverseDirection([poses[0],
poses[1],poses[2],poses[3]],direction)}function getDist(startPos,matrix,width,height,n,direction){matrix=caculatePoses(matrix,width,height,n);direction=getPosByReverseDirection(matrix,direction);return[startPos[0]-direction[0],startPos[1]-direction[1]]}function scaleMatrix(state,scale){var transformOrigin=state.transformOrigin,offsetMatrix=state.offsetMatrix,n=state.is3d?4:3;state=matrix$jscomp$0.multiply(state.targetMatrix,matrix$jscomp$0.createScaleMatrix(scale,n),n);return matrix$jscomp$0.multiply(offsetMatrix,
getAbsoluteMatrix(state,n,transformOrigin),n)}function getResizeDist(moveable,width,height,direction,fixedPosition,transformOrigin){var groupable=moveable.props.groupable,_a=moveable.state,targetMatrix=_a.targetMatrix,offsetMatrix=_a.offsetMatrix,left=_a.left,top=_a.top;moveable=_a.is3d?4:3;_a=caculateTransformOrigin(transformOrigin,width,height,_a.width,_a.height,_a.transformOrigin);transformOrigin=groupable?left:0;groupable=groupable?top:0;targetMatrix=matrix$jscomp$0.multiply(offsetMatrix,getAbsoluteMatrix(targetMatrix,
moveable,_a),moveable);width=getDist(fixedPosition,targetMatrix,width,height,moveable,direction);return matrix$jscomp$0.minus(width,[transformOrigin,groupable])}function getStartDirection(moveable,direction){moveable=moveable.props.baseDirection;moveable=void 0===moveable?[-1,-1]:moveable;return[direction[0]?direction[0]:-1*moveable[0],direction[1]?direction[1]:-1*moveable[1]]}function getFixedPosition(moveable,direction){return getStartPos(getAbsolutePosesByState(moveable.state),direction)}function snapStart(moveable){var state=
moveable.state;if(!state.guidelines||!state.guidelines.length){var _a=moveable.props;moveable=_a.horizontalGuidelines;var horizontalGuidelines=void 0===moveable?[]:moveable;moveable=_a.verticalGuidelines;var verticalGuidelines=void 0===moveable?[]:moveable;moveable=_a.elementGuidelines;moveable=void 0===moveable?[]:moveable;var snapCenter=_a.snapCenter;if(_a.bounds||horizontalGuidelines.length||verticalGuidelines.length||moveable.length){_a=state.containerRect;var containerTop=_a.top,containerLeft=
_a.left;horizontalGuidelines=state.clientRect;_a=horizontalGuidelines.top;horizontalGuidelines=horizontalGuidelines.left;var poses=getAbsolutePosesByState(state);verticalGuidelines=Math.min.apply(Math,poses.map(function(pos){return pos[0]}));poses=Math.min.apply(Math,poses.map(function(pos){return pos[1]}));var distLeft=roundSign(verticalGuidelines-(horizontalGuidelines-containerLeft)),distTop=roundSign(poses-(_a-containerTop)),guidelines=[];moveable.forEach(function(el){var rect=el.getBoundingClientRect(),
width=rect.width,height=rect.height,elementTop=rect.top-containerTop,elementBottom=elementTop+height;rect=rect.left-containerLeft;var elementRight=rect+width;guidelines.push({type:"vertical",element:el,pos:[throttle(rect+distLeft,.1),elementTop],size:height});guidelines.push({type:"vertical",element:el,pos:[throttle(elementRight+distLeft,.1),elementTop],size:height});guidelines.push({type:"horizontal",element:el,pos:[rect,throttle(elementTop+distTop,.1)],size:width});guidelines.push({type:"horizontal",
element:el,pos:[rect,throttle(elementBottom+distTop,.1)],size:width});snapCenter&&(guidelines.push({type:"vertical",element:el,pos:[throttle((rect+elementRight)/2+distLeft,.1),elementTop],size:height,center:!0}),guidelines.push({type:"horizontal",element:el,pos:[rect,throttle((elementTop+elementBottom)/2+distTop,.1)],size:width,center:!0}))});state.guidelines=guidelines;state.enableSnap=!0}}}function checkBounds(moveable,verticalPoses,horizontalPoses,snapThreshold){return{vertical:checkBound(moveable,
verticalPoses,!0,snapThreshold),horizontal:checkBound(moveable,horizontalPoses,!1,snapThreshold)}}function checkBound(moveable,poses,isVertical,snapThreshold){void 0===snapThreshold&&(snapThreshold=0);var bounds=moveable.props.bounds;if(bounds){moveable=bounds[isVertical?"left":"top"];isVertical=bounds[isVertical?"right":"bottom"];bounds=Math.min.apply(Math,poses);poses=Math.max.apply(Math,poses);if(!utils.isUndefined(moveable)&&moveable+snapThreshold>bounds)return{isBound:!0,offset:bounds-moveable,
pos:moveable};if(!utils.isUndefined(isVertical)&&isVertical-snapThreshold<poses)return{isBound:!0,offset:poses-isVertical,pos:isVertical}}return{isBound:!1,offset:0,pos:0}}function checkSnap(guidelines,targetType,targetPoses,snapThreshold,snapCenter,snapElement){if(!guidelines||!guidelines.length)return{isSnap:!1,posInfos:[]};var posType="vertical"===targetType?0:1;targetPoses=targetPoses.map(function(targetPos){var guidelineInfos=guidelines.map(function(guideline){var offset=targetPos-guideline.pos[posType];
return{offset:offset,dist:Math.abs(offset),guideline:guideline}}).filter(function(_a){var guideline=_a.guideline;_a=_a.dist;var type=guideline.type,center=guideline.center;guideline=guideline.element;return!snapElement&&guideline||!snapCenter&&center||type!==targetType||_a>snapThreshold?!1:!0}).sort(function(a,b){return a.dist-b.dist});return{pos:targetPos,guidelineInfos:guidelineInfos}}).filter(function(snapPosInfo){return 0<snapPosInfo.guidelineInfos.length}).sort(function(a,b){return a.guidelineInfos[0].dist-
b.guidelineInfos[0].dist});return{isSnap:0<targetPoses.length,posInfos:targetPoses}}function hasGuidelines(moveable,ableName){var _a=moveable.props,snappable=_a.snappable,bounds=_a.bounds,verticalGuidelines=_a.verticalGuidelines;_a=_a.horizontalGuidelines;var _b=moveable.state;moveable=_b.guidelines;_b=_b.enableSnap;return!snappable||!_b||ableName&&!0!==snappable&&snappable.indexOf(ableName)?!1:bounds||moveable&&moveable.length||verticalGuidelines&&verticalGuidelines.length||_a&&_a.length?!0:!1}function checkSnapPoses(moveable,
posesX,posesY,snapCenter,customSnapThreshold){var _a=moveable.state,guidelines=_a.guidelines;_a=_a.containerRect;var containerHeight=_a.height,containerWidth=_a.width;moveable=moveable.props;customSnapThreshold=selectValue(customSnapThreshold,moveable.snapThreshold,5);_a=moveable.snapElement;_a=void 0===_a?!0:_a;var _d=moveable.snapHorizontal;_d=void 0===_d?!0:_d;var _e=moveable.snapVertical;_e=void 0===_e?!0:_e;var verticalGuidelines=moveable.verticalGuidelines;moveable=moveable.horizontalGuidelines;
var totalGuidelines=guidelines.slice();_d&&moveable&&moveable.forEach(function(pos){totalGuidelines.push({type:"horizontal",pos:[0,throttle(pos,.1)],size:containerWidth})});_e&&verticalGuidelines&&verticalGuidelines.forEach(function(pos){totalGuidelines.push({type:"vertical",pos:[throttle(pos,.1),0],size:containerHeight})});return{vertical:checkSnap(totalGuidelines,"vertical",posesX,customSnapThreshold,snapCenter,_a),horizontal:checkSnap(totalGuidelines,"horizontal",posesY,customSnapThreshold,snapCenter,
_a)}}function checkSnaps(moveable,rect,isCenter,customSnapThreshold){isCenter=moveable.props.snapCenter&&isCenter;var verticalNames=["left","right"],horizontalNames=["top","bottom"];isCenter&&(verticalNames.push("center"),horizontalNames.push("middle"));verticalNames=verticalNames.filter(function(name){return name in rect});horizontalNames=horizontalNames.filter(function(name){return name in rect});return checkSnapPoses(moveable,verticalNames.map(function(name){return rect[name]}),horizontalNames.map(function(name){return rect[name]}),
isCenter,customSnapThreshold)}function checkBoundOneWayDist(moveable,pos){var _a=checkBounds(moveable,[pos[0]],[pos[1]]);pos=_a.horizontal;moveable=pos.isBound;pos=pos.offset;var _c=_a.vertical;_a=_c.isBound;_c=_c.offset;if(moveable||_a)return pos=(moveable=moveable&&_a?Math.abs(pos)<Math.abs(_c):_a)?_c:pos,{isVertical:moveable,offset:pos,dist:Math.abs(pos)}}function solveNextDist(pos1,pos2,offset,isVertical,isDirectionVertical,datas){a:{offset=-offset;var dx=pos2[0]-pos1[0],dy=pos2[1]-pos1[1];1E-7>
Math.abs(dx)&&(dx=0);1E-7>Math.abs(dy)&&(dy=0);if(dx){if(dy){dx=dy/dx;pos1=pos1[1]-dx*pos1[0];pos2=isVertical?[offset,dx*(pos2[0]+offset)+pos1-pos2[1]]:[(pos2[1]+offset-pos1)/dx-pos2[0],offset];break a}if(isVertical){pos2=[offset,0];break a}}else if(!isVertical){pos2=[0,offset];break a}pos2=void 0}if(!pos2)return NaN;pos2=getDragDist({datas:datas,distX:pos2[0],distY:pos2[1]});datas=pos2[0];pos2=pos2[1];return isDirectionVertical?pos2:datas}function getFixedPoses(matrix$1,width,height,fixedPos,direction,
is3d){matrix$1=caculatePoses(matrix$1,width,height,is3d?4:3);direction=getPosByReverseDirection(matrix$1,direction);return getAbsolutePoses(matrix$1,matrix$jscomp$0.minus(fixedPos,direction))}function getNearestSnapGuidelineInfo(snapInfo){var isSnap=snapInfo.isSnap;if(!isSnap)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};snapInfo=snapInfo.posInfos[0];var guidelineInfo=snapInfo.guidelineInfos[0];return{isSnap:isSnap,offset:guidelineInfo.offset,dist:guidelineInfo.dist,pos:snapInfo.pos,guideline:guidelineInfo.guideline}}
function checkOneWayPos(moveable,poses,reversePoses,isDirectionVertical,datas){var posOffset=0,boundInfo,boundIndex=-1;poses.map(function(pos){return checkBoundOneWayDist(moveable,pos)}).forEach(function(info,i){info&&(!boundInfo||boundInfo.dist<info.dist)&&(boundInfo=info,boundIndex=i)});boundInfo?(poses=solveNextDist(reversePoses[boundIndex],poses[boundIndex],boundInfo.offset,boundInfo.isVertical,isDirectionVertical,datas),isNaN(poses)||(posOffset=poses)):poses.some(function(pos,i){i=reversePoses[i];
var _a=checkSnapPoses(moveable,[pos[0]],[pos[1]]),verticalSnapInfo=_a.vertical,fixedHorizontal=1E-7>Math.abs(i[1]-pos[1]),fixedVertical=1E-7>Math.abs(i[0]-pos[0]),_b=getNearestSnapGuidelineInfo(_a.horizontal);_a=_b.isSnap;var horizontalDist=_b.dist;_b=_b.offset;var _c=getNearestSnapGuidelineInfo(verticalSnapInfo);verticalSnapInfo=_c.isSnap;var verticalDist=_c.dist;_c=_c.offset;_a||verticalSnapInfo?(fixedHorizontal=_a&&verticalSnapInfo?0===horizontalDist&&fixedHorizontal?!0:0===_c&&fixedVertical?!1:
horizontalDist>verticalDist:verticalSnapInfo,pos=solveNextDist(i,pos,fixedHorizontal?_c:_b,fixedHorizontal,isDirectionVertical,datas)):pos=NaN;if(isNaN(pos))return!1;posOffset=pos;return!0});return posOffset}function checkSizeDist(moveable,matrix,width,height,direction,snapDirection,datas,is3d){var poses=getAbsolutePosesByState(moveable.state),fixedPos=getPosByReverseDirection(poses,snapDirection);poses=getFixedPoses(matrix,width,height,fixedPos,direction,is3d);if(direction[0]&&direction[1]){var directionPoses=
getPosesByDirection(poses,direction),verticalDirection=[direction[0],-1*direction[1]],horizontalDirection=[-1*direction[0],direction[1]],verticalPos=getPosByDirection(poses,verticalDirection),horizontalPos=getPosByDirection(poses,horizontalDirection),_b=checkBounds(moveable,[directionPoses[0][0]],[directionPoses[0][1]]),_c=_b.horizontal;snapDirection=_c.isBound;_c=_c.offset;var _d=_b.vertical;_b=_d.isBound;_d=_d.offset;var widthDist=0,heightDist=0,verticalBoundInfo=checkBoundOneWayDist(moveable,verticalPos);
horizontalPos=checkBoundOneWayDist(moveable,horizontalPos);var isVeritcalDirectionBound=verticalBoundInfo&&verticalBoundInfo.dist>Math.abs(_d),isHorizontalDirectionBound=horizontalPos&&horizontalPos.dist>Math.abs(_c);isVeritcalDirectionBound||isHorizontalDirectionBound?isVeritcalDirectionBound?(snapDirection=getPosByDirection(poses,[-1*verticalDirection[0],verticalDirection[1]]),snapDirection=solveNextDist(snapDirection,verticalPos,verticalBoundInfo.offset,verticalBoundInfo.isVertical,!1,datas),isNaN(snapDirection)||
(widthDist=snapDirection),matrix=getFixedPoses(matrix,width+direction[0]*widthDist,height+direction[1]*heightDist,fixedPos,direction,is3d),heightDist=checkOneWayPos(moveable,[getPosByDirection(matrix,direction)],[getPosByDirection(matrix,verticalDirection)],!0,datas)):(snapDirection=getPosByDirection(poses,[-1*horizontalDirection[0],horizontalDirection[1]]),snapDirection=solveNextDist(snapDirection,verticalPos,horizontalPos.offset,horizontalPos.isVertical,!0,datas),isNaN(snapDirection)||(heightDist=
snapDirection),matrix=getFixedPoses(matrix,width+direction[0]*widthDist,height+direction[1]*heightDist,fixedPos,direction,is3d),widthDist=checkOneWayPos(moveable,[getPosByDirection(matrix,direction)],[getPosByDirection(matrix,horizontalDirection)],!1,datas)):(matrix=checkSnapPoses(moveable,[directionPoses[0][0]],[directionPoses[0][1]]),moveable=matrix.vertical,matrix=getNearestSnapGuidelineInfo(matrix.horizontal).offset,moveable=getNearestSnapGuidelineInfo(moveable).offset,datas=getDragDist({datas:datas,
distX:-(_b?_d:moveable),distY:-(snapDirection?_c:matrix)}),widthDist=datas[0],heightDist=datas[1]);return[direction[0]*widthDist,direction[1]*heightDist]}matrix=0!==direction[0]?0:1;width=0<matrix;height=poses.slice().reverse();moveable.props.keepRatio?(is3d=[getPosByDirection(poses,direction)],height=[getPosByDirection(height,direction)]):(is3d=getPosesByDirection(poses,direction),height=getPosesByDirection(height,direction),is3d.push([(is3d[0][0]+is3d[1][0])/2,(is3d[0][1]+is3d[1][1])/2]),height.reverse(),
height.push([(height[0][0]+height[1][0])/2,(height[0][1]+height[1][1])/2]));datas=checkOneWayPos(moveable,is3d,height,width,datas);moveable=[0,0];moveable[matrix]=direction[matrix]*datas;return moveable}function checkSnapSize(moveable,width,height,direction,datas){if(!hasGuidelines(moveable,"resizable"))return[0,0];var _a=moveable.state;return checkSizeDist(moveable,_a.matrix,width,height,direction,direction,datas,_a.is3d)}function getSnapInfosByDirection(moveable,poses,snapDirection){if(!0===snapDirection)return poses=
getRect(poses),poses.middle=(poses.top+poses.bottom)/2,poses.center=(poses.left+poses.right)/2,checkSnaps(moveable,poses,!0,1);if(snapDirection[0]||snapDirection[1])return nextPoses=void 0,moveable.props.keepRatio?nextPoses=[getPosByDirection(poses,snapDirection)]:(nextPoses=getPosesByDirection(poses,snapDirection),1<nextPoses.length&&nextPoses.push([(nextPoses[0][0]+nextPoses[1][0])/2,(nextPoses[0][1]+nextPoses[1][1])/2])),checkSnapPoses(moveable,nextPoses.map(function(pos){return pos[0]}),nextPoses.map(function(pos){return pos[1]}),
!0,1);snapDirection=[poses[0],poses[1],poses[3],poses[2],poses[0]];for(var nextPoses=[],i=0;4>i;++i)nextPoses.push(snapDirection[i]),poses.push([(snapDirection[i][0]+snapDirection[i+1][0])/2,(snapDirection[i][1]+snapDirection[i+1][1])/2]);return checkSnapPoses(moveable,nextPoses.map(function(pos){return pos[0]}),nextPoses.map(function(pos){return pos[1]}),!0,1)}function checkSnapDrag(moveable,distX,distY,datas){var snapVerticalInfo={isSnap:!1,offset:0},snapHorizontalInfo={isSnap:!1,offset:0};if(!hasGuidelines(moveable,
"draggable"))return[snapVerticalInfo,snapHorizontalInfo];distX=getAbsolutePoses(datas.absolutePoses,[distX,distY]);var _a=getRect(distX);distX=_a.left;distY=_a.right;datas=_a.top;var bottom=_a.bottom;_a=checkSnaps(moveable,{left:distX,right:distY,top:datas,bottom:bottom,center:(distX+distY)/2,middle:(datas+bottom)/2},!0);moveable=checkBounds(moveable,[distX,distY],[datas,bottom]);moveable.vertical.isBound?(snapVerticalInfo.offset=moveable.vertical.offset,snapVerticalInfo.isSnap=!0):_a.vertical.isSnap&&
(snapVerticalInfo.offset=_a.vertical.posInfos[0].guidelineInfos[0].offset,snapVerticalInfo.isSnap=!0);moveable.horizontal.isBound?(snapHorizontalInfo.offset=moveable.horizontal.offset,snapHorizontalInfo.isSnap=!0):_a.horizontal.isSnap&&(snapHorizontalInfo.offset=_a.horizontal.posInfos[0].guidelineInfos[0].offset,snapHorizontalInfo.isSnap=!0);return[snapVerticalInfo,snapHorizontalInfo]}function getSnapGuidelines(posInfos){var guidelines=[];posInfos.forEach(function(posInfo){posInfo.guidelineInfos.forEach(function(_a){_a=
_a.guideline;-1<guidelines.indexOf(_a)||guidelines.push(_a)})});return guidelines}function setCustomDrag(state,delta,inputEvent){return __assign({},state.dragger.move(delta,inputEvent),{parentEvent:!0})}function setRotateStartInfo(datas,clientX,clientY,origin,rotationPos){datas.startAbsoluteOrigin=[clientX-rotationPos[0]+origin[0],clientY-rotationPos[1]+origin[1]];datas.prevDeg=matrix$jscomp$0.getRad(datas.startAbsoluteOrigin,[clientX,clientY])/Math.PI*180;datas.startDeg=datas.prevDeg;datas.loop=
0}function getDeg(datas,deg,direction,startRotate,throttleRotate){var prevDeg=datas.prevDeg,startDeg=datas.startDeg,prevLoop=datas.loop;prevDeg>deg&&270<prevDeg&&90>deg?++datas.loop:prevDeg<deg&&90>prevDeg&&270<deg&&--datas.loop;var loop=datas.loop;prevDeg=360*prevLoop+prevDeg-startDeg+startRotate;deg=throttle(360*loop+deg-startDeg+startRotate,throttleRotate);datas.prevDeg=deg-360*loop+startDeg-startRotate;return[direction*(deg-prevDeg),direction*(deg-startRotate),deg]}function getPositions(rotationPosition,
pos1,pos2,pos3,pos4){return"left"===rotationPosition?[pos3,pos1]:"right"===rotationPosition?[pos2,pos4]:"bottom"===rotationPosition?[pos4,pos3]:[pos1,pos2]}function getRotationPosition(_a,rad){var pos1=_a[0];_a=_a[1];rad=matrix$jscomp$0.rotate([0,-40,1],rad);return[(pos1[0]+_a[0])/2+rad[0],(pos1[1]+_a[1])/2+rad[1]]}function dragControlCondition(target){return utils.hasClass(target,prefix("rotation"))}function renderControls(moveable,defaultDirections,React){var _a=moveable.state,rotation=_a.rotation;
moveable=moveable.props.renderDirections;defaultDirections=void 0===moveable?defaultDirections:moveable;var poses=[_a.pos1,_a.pos2,_a.pos3,_a.pos4],directionMap={};defaultDirections.forEach(function(direction){directionMap[direction]=!0});return defaultDirections.map(function(direction){var indexes=DIRECTION_INDEXES[direction];return indexes&&directionMap[direction]?React.createElement("div",{className:prefix("control","direction",direction),"data-direction":direction,key:direction,style:getControlTransform.apply(void 0,
[rotation].concat(indexes.map(function(index){return poses[index]})))}):null})}function renderAllDirections(moveable,React){return renderControls(moveable,"nw ne sw se n w s e".split(" "),React)}function getMiddleLinePos(pos1,pos2){return pos1.map(function(pos,i){return utils.dot(pos,pos2[i],1,2)})}function getTriangleRad(pos1,pos2,pos3){pos2=matrix$jscomp$0.getRad(pos1,pos2);pos1=matrix$jscomp$0.getRad(pos1,pos3)-pos2;return 0<=pos1?pos1:pos1+2*Math.PI}function isValidPos(poses1,poses2){poses1=getTriangleRad(poses1[0],
poses1[1],poses1[2]);poses2=getTriangleRad(poses2[0],poses2[1],poses2[2]);var pi=Math.PI;return poses1>=pi&&poses2<=pi||poses1<=pi&&poses2>=pi?!1:!0}function restoreStyle(moveable){var el=moveable.areaElement,_a=moveable.state;moveable=_a.width;_a=_a.height;utils.removeClass(el,AVOID);el.style.cssText+="left: 0px; top: 0px; width: "+moveable+"px; height: "+_a+"px"}function renderPieces(React){return React.createElement("div",{key:"area_pieces",className:AREA_PIECES},React.createElement("div",{className:AREA_PIECE}),
React.createElement("div",{className:AREA_PIECE}),React.createElement("div",{className:AREA_PIECE}),React.createElement("div",{className:AREA_PIECE}))}function getDefaultScrollPosition(e){e=e.scrollContainer;return[e.scrollLeft,e.scrollTop]}function getMaxPos(poses,index){return Math.max.apply(Math,poses.map(function(_a){return Math.max(_a[0][index],_a[1][index],_a[2][index],_a[3][index])}))}function getMinPos(poses,index){return Math.min.apply(Math,poses.map(function(_a){return Math.min(_a[0][index],
_a[1][index],_a[2][index],_a[3][index])}))}function getGroupRect(moveables,rotation){if(!moveables.length)return[0,0,0,0];var moveablePoses=moveables.map(function(_a){return getAbsolutePosesByState(_a.state)}),minX=MAX_NUM,minY=MAX_NUM,groupHeight=moveables=0,fixedRotation=throttle(rotation,1E-7);if(fixedRotation%90){var rad_1=rotation/180*Math.PI,a1_1=Math.tan(rad_1),a2_1=-1/a1_1,b1s_1=[MIN_NUM,MAX_NUM],b2s_1=[MIN_NUM,MAX_NUM];moveablePoses.forEach(function(poses){poses.forEach(function(pos){var b1=
pos[1]-a1_1*pos[0];pos=pos[1]-a2_1*pos[0];b1s_1[0]=Math.max(b1s_1[0],b1);b1s_1[1]=Math.min(b1s_1[1],b1);b2s_1[0]=Math.max(b2s_1[0],pos);b2s_1[1]=Math.min(b2s_1[1],pos)})});b1s_1.forEach(function(b1){b2s_1.forEach(function(b2){b2=(b2-b1)/(a1_1-a2_1);var y=a1_1*b2+b1;minX=Math.min(minX,b2);minY=Math.min(minY,y)})});rotation=moveablePoses.map(function(_a){var pos2=_a[1],pos3=_a[2],pos4=_a[3];return[matrix$jscomp$0.rotate(_a[0],-rad_1),matrix$jscomp$0.rotate(pos2,-rad_1),matrix$jscomp$0.rotate(pos3,-rad_1),
matrix$jscomp$0.rotate(pos4,-rad_1)]});moveables=getMaxPos(rotation,0)-getMinPos(rotation,0);groupHeight=getMaxPos(rotation,1)-getMinPos(rotation,1)}else minX=getMinPos(moveablePoses,0),minY=getMinPos(moveablePoses,1),moveables=getMaxPos(moveablePoses,0)-minX,groupHeight=getMaxPos(moveablePoses,1)-minY,fixedRotation%180&&(rotation=moveables,moveables=groupHeight,groupHeight=rotation);return[minX,minY,moveables,groupHeight]}var React$jscomp$0=require("module$node_modules$react$index"),frameworkUtils=
require("module$node_modules$framework_utils$dist$utils_cjs"),getAgent=require("module$node_modules$$egjs$agent$dist$agent"),utils=require("module$node_modules$$daybrush$utils$dist$utils"),matrix$jscomp$0=require("module$node_modules$$moveable$matrix$dist$matrix_cjs"),styler=require("module$node_modules$react_css_styler$dist$styler_cjs"),Dragger=require("module$node_modules$$daybrush$drag$dist$drag_cjs"),ChildrenDiffer=require("module$node_modules$$egjs$children_differ$dist$children_differ"),extendStatics=
function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)},__assign=function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t};return __assign.apply(this,arguments)},agent=getAgent(),isWebkit=-1<agent.os.name.indexOf("ios")||
-1<agent.browser.name.indexOf("safari"),MOVEABLE_CSS=frameworkUtils.prefixCSS("moveable-","\n{\n\tposition: fixed;\n\twidth: 0;\n\theight: 0;\n\tleft: 0;\n\ttop: 0;\n\tz-index: 3000;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n\ttop: 0;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    z-index: 10;\n    will-change: transform;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tbackground: #4af;\n\ttransform-origin: 0px 0.5px;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n}\n.line.rotation-line {\n\theight: 40px;\n\twidth: 1px;\n\ttransform-origin: 0.5px 39.5px;\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n\tcursor: alias;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n\tmargin-left: -6px;\n\tpointer-events: none;\n}\n.direction.e, .direction.w {\n\tcursor: ew-resize;\n}\n.direction.s, .direction.n {\n\tcursor: ns-resize;\n}\n.direction.nw, .direction.se, :host.reverse .direction.ne, :host.reverse .direction.sw {\n\tcursor: nwse-resize;\n}\n.direction.ne, .direction.sw, :host.reverse .direction.nw, :host.reverse .direction.se {\n\tcursor: nesw-resize;\n}\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n"+
(isWebkit?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n"),NEARBY_POS=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],MAX_NUM=Math.pow(10,10),MIN_NUM=-MAX_NUM,DIRECTION_INDEXES={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},ControlBoxElement=styler("div",MOVEABLE_CSS),MoveableManager=function(_super){function MoveableManager(){var _this=null!==_super&&_super.apply(this,arguments)||this;_this.state={conatainer:null,target:null,beforeMatrix:matrix$jscomp$0.createIdentityMatrix(3),
matrix:matrix$jscomp$0.createIdentityMatrix(3),targetMatrix:matrix$jscomp$0.createIdentityMatrix(3),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],clientRect:resetClientRect(),containerRect:resetClientRect(),rotation:0};_this.targetAbles=[];_this.controlAbles=[];return _this}__extends(MoveableManager,_super);var __proto=MoveableManager.prototype;__proto.render=
function(){var _a=this.props,edge=_a.edge,parentPosition=_a.parentPosition;_a=_a.className;this.checkUpdate();var _b=parentPosition||{left:0,top:0};parentPosition=_b.left;_b=_b.top;var _c=this.state,left=_c.left,top=_c.top,pos1=_c.pos1,pos2=_c.pos2,pos3=_c.pos3,pos4=_c.pos4,target=_c.target;_c=_c.direction;return React$jscomp$0.createElement(ControlBoxElement,{ref:frameworkUtils.ref(this,"controlBox"),className:prefix("control-box",-1===_c?"reverse":"")+" "+_a,style:{position:"absolute",display:target?
"block":"none",transform:"translate("+(left-parentPosition)+"px, "+(top-_b)+"px) translateZ(50px)"}},this.renderAbles(),renderLine(edge?"n":"",pos1,pos2,0),renderLine(edge?"e":"",pos2,pos4,1),renderLine(edge?"w":"",pos1,pos3,2),renderLine(edge?"s":"",pos3,pos4,3))};__proto.componentDidMount=function(){this.controlBox.getElement();var props=this.props,parentMoveable=props.parentMoveable,container=props.container;this.updateEvent(props);container||parentMoveable||this.updateRect("End",!1,!0)};__proto.componentDidUpdate=
function(prevProps){this.updateEvent(prevProps)};__proto.componentWillUnmount=function(){unset(this,"targetDragger");unset(this,"controlDragger")};__proto.getContainer=function(){var _a=this.props,parentMoveable=_a.parentMoveable;return _a.container||parentMoveable&&parentMoveable.getContainer()||this.controlBox.getElement().parentElement};__proto.isMoveableElement=function(target){return target&&-1<(target.getAttribute("class")||"").indexOf("moveable-")};__proto.dragStart=function(e){if(this.targetDragger)this.targetDragger.onDragStart(e)};
__proto.isInside=function(clientX,clientY){var _a=this.state,pos1=_a.pos1,pos2=_a.pos2,pos3=_a.pos3,pos4=_a.pos4;_a=_a.target;if(!_a)return!1;_a=_a.getBoundingClientRect();return isInside([clientX-_a.left,clientY-_a.top],pos1,pos2,pos4,pos3)};__proto.updateRect=function(type,isTarget,isSetState){void 0===isSetState&&(isSetState=!0);type=this.props.parentMoveable;var state=this.state,target=state.target||this.props.target,container=this.getContainer();this.updateState(getTargetInfo(target,container,
container,isTarget?state:void 0),type?!1:isSetState)};__proto.updateEvent=function(prevProps){var controlBoxElement=this.controlBox.getElement(),hasTargetAble=this.targetAbles.length,hasControlAble=this.controlAbles.length,target=this.props.target,prevTarget=prevProps.target,dragArea=this.props.dragArea;prevProps=prevProps.dragArea;if(prevTarget=!hasTargetAble&&this.targetDragger||!dragArea&&prevTarget!==target||prevProps!==dragArea)unset(this,"targetDragger"),this.updateState({dragger:null});hasControlAble||
unset(this,"controlDragger");target&&hasTargetAble&&!this.targetDragger&&(this.targetDragger=dragArea?getAbleDragger(this,this.areaElement,"targetAbles",""):getAbleDragger(this,target,"targetAbles",""));!this.controlDragger&&hasControlAble&&(this.controlDragger=getAbleDragger(this,controlBoxElement,"controlAbles","Control"));prevTarget&&this.unsetAbles()};__proto.updateTarget=function(type){this.updateRect(type,!0)};__proto.getRect=function(){var state=this.state,poses=getAbsolutePosesByState(this.state),
pos1=poses[0],pos2=poses[1],pos3=poses[2],pos4=poses[3];poses=getRect(poses);return{width:poses.width,height:poses.height,left:poses.left,top:poses.top,pos1:pos1,pos2:pos2,pos3:pos3,pos4:pos4,offsetWidth:state.width,offsetHeight:state.height}};__proto.checkUpdate=function(){var _a=this.props,target=_a.target,container=_a.container;_a=_a.parentMoveable;var _b=this.state,stateTarget=_b.target;_b=_b.container;if(stateTarget||target)this.updateAbles(),equals(stateTarget,target)&&equals(_b,container)||
(this.updateState({target:target,container:container}),_a||!container&&!this.controlBox||this.updateRect("End",!1,!1))};__proto.triggerEvent=function(name,e){return(name=this.props[name])&&name(e)};__proto.unsetAbles=function(){var _this=this;this.targetAbles.filter(function(able){return able.unset?(able.unset(_this),!0):!1}).length&&this.forceUpdate()};__proto.updateAbles=function(ables,eventAffix){void 0===ables&&(ables=this.props.ables);void 0===eventAffix&&(eventAffix="");var props=this.props;
ables=ables.filter(function(able){return able&&props[able.name]});var dragControlStart="drag"+eventAffix+"ControlStart";eventAffix=filterAbles(ables,["drag"+eventAffix+"Start","pinch"+eventAffix+"Start"]);ables=filterAbles(ables,[dragControlStart]);this.targetAbles=eventAffix;this.controlAbles=ables};__proto.updateState=function(nextState,isSetState){if(isSetState)this.setState(nextState);else{isSetState=this.state;for(var name in nextState)isSetState[name]=nextState[name]}};__proto.renderAbles=function(){var _this=
this,props=this.props,enabledAbles=props.ables.filter(function(able){return able&&props[able.name]});return filterAbles(enabledAbles,["render"]).map(function(_a){_a=_a.render;return _a(_this,React$jscomp$0)})};MoveableManager.defaultProps={target:null,container:null,origin:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,transformOrigin:"",className:""};return MoveableManager}(React$jscomp$0.PureComponent),Pinchable={name:"pinchable",updateRect:!0,props:{pinchable:Boolean,
pinchThreshold:Number},pinchStart:function(moveable,e){var datas=e.datas,clientX=e.clientX,clientY=e.clientY,touches=e.touches,inputEvent=e.inputEvent,targets=e.targets,_a=moveable.props,pinchable=_a.pinchable;_a=_a.ables;if(!pinchable)return!1;var eventName="onPinch"+(targets?"Group":"")+"Start",controlEventName="drag"+(targets?"Group":"")+"ControlStart";_a=(!0===pinchable?moveable.controlAbles:_a.filter(function(able){return-1<pinchable.indexOf(able.name)})).filter(function(able){return able.canPinch&&
able[controlEventName]});e=fillParams(moveable,e,{});targets&&(e.targets=targets);targets=moveable.triggerEvent(eventName,e);datas.isPinch=!1!==targets;datas.ables=_a;targets=datas.isPinch;if(!targets)return!1;var parentRotate=getRotatiion(touches);_a.forEach(function(able){datas[able.name+"Datas"]={};able[controlEventName](moveable,{datas:datas[able.name+"Datas"],clientX:clientX,clientY:clientY,inputEvent:inputEvent,parentRotate:parentRotate,pinchFlag:!0})});moveable.state.snapDirection=[0,0];return targets},
pinch:function(moveable,e){var datas=e.datas,clientX=e.clientX,clientY=e.clientY,pinchScale=e.scale,distance=e.distance,inputEvent=e.inputEvent,targets=e.targets;if(datas.isPinch){var parentRotate=getRotatiion(e.touches),parentDistance=distance*(1-1/pinchScale);e=fillParams(moveable,e,{});targets&&(e.targets=targets);moveable.triggerEvent("onPinch"+(targets?"Group":""),e);var controlEventName="drag"+(targets?"Group":"")+"Control";datas.ables.forEach(function(able){able[controlEventName](moveable,
{clientX:clientX,clientY:clientY,datas:datas[able.name+"Datas"],inputEvent:inputEvent,parentDistance:parentDistance,parentRotate:parentRotate,pinchFlag:!0})});return e}},pinchEnd:function(moveable,e){var datas=e.datas,clientX=e.clientX,clientY=e.clientY,isPinch=e.isPinch,inputEvent=e.inputEvent,targets=e.targets;if(datas.isPinch){var eventName="onPinch"+(targets?"Group":"")+"End";e=fillParams(moveable,e,{isDrag:isPinch});targets&&(e.targets=targets);moveable.triggerEvent(eventName,e);var controlEventName=
"drag"+(targets?"Group":"")+"ControlEnd";datas.ables.forEach(function(able){able[controlEventName](moveable,{clientX:clientX,clientY:clientY,isDrag:isPinch,datas:datas[able.name+"Datas"],inputEvent:inputEvent,pinchFlag:!0})});return isPinch}},pinchGroupStart:function(moveable,e){return this.pinchStart(moveable,__assign({},e,{targets:moveable.props.targets}))},pinchGroup:function(moveable,e){return this.pinch(moveable,__assign({},e,{targets:moveable.props.targets}))},pinchGroupEnd:function(moveable,
e){return this.pinchEnd(moveable,__assign({},e,{targets:moveable.props.targets}))}},Snappable={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object},render:function(moveable,React){var _a$jscomp$0=moveable.state,targetTop=_a$jscomp$0.top,targetLeft=_a$jscomp$0.left,pos1=_a$jscomp$0.pos1,pos2=_a$jscomp$0.pos2,
pos3=_a$jscomp$0.pos3,pos4=_a$jscomp$0.pos4,snapDirection=_a$jscomp$0.snapDirection,clientRect=_a$jscomp$0.clientRect;_a$jscomp$0=_a$jscomp$0.containerRect;var clientLeft=clientRect.left-_a$jscomp$0.left,clientTop=clientRect.top-_a$jscomp$0.top,minLeft=Math.min(pos1[0],pos2[0],pos3[0],pos4[0]),minTop=Math.min(pos1[1],pos2[1],pos3[1],pos4[1]);if(!snapDirection||!hasGuidelines(moveable,""))return[];pos1=getAbsolutePosesByState(moveable.state);clientRect=getRect(pos1);var width=clientRect.width,height=
clientRect.height;pos2=clientRect.top;pos3=clientRect.left;pos4=clientRect.bottom;clientRect=clientRect.right;pos1=getSnapInfosByDirection(moveable,pos1,snapDirection);snapDirection=pos1.vertical.posInfos;pos1=pos1.horizontal.posInfos;pos3=checkBounds(moveable,[pos3,clientRect],[pos2,pos4],1);pos2=pos3.vertical;moveable=pos2.isBound;pos2=pos2.pos;pos4=pos3.horizontal;pos3=pos4.isBound;_a$jscomp$0=pos4.pos;pos4=snapDirection.map(function(posInfo){return posInfo.pos});clientRect=pos1.map(function(posInfo){return posInfo.pos});
snapDirection=getSnapGuidelines(snapDirection);pos1=getSnapGuidelines(pos1);moveable&&0>pos4.indexOf(pos2)&&pos4.push(pos2);pos3&&0>clientRect.indexOf(_a$jscomp$0)&&clientRect.push(_a$jscomp$0);moveable=snapDirection.filter(function(_a){return _a.element});return pos1.filter(function(_a){return _a.element}).map(function(_a,i){var pos=_a.pos,lineLeft=Math.min(0,pos[0]-clientLeft);_a=Math.max(width,pos[0]-clientLeft+_a.size);return React.createElement("div",{className:prefix("line","horizontal","guideline",
"dashed"),key:"horizontalLinkGuidline"+i,style:{left:minLeft+lineLeft+"px",top:-targetTop+pos[1]+"px",width:_a-lineLeft+"px"}})}).concat(moveable.map(function(_a,i){var pos=_a.pos,lineTop=Math.min(0,pos[1]-clientTop);_a=Math.max(height,pos[1]-clientTop+_a.size);return React.createElement("div",{className:prefix("line","vertical","guideline","dashed"),key:"verticalDashedGuidline"+i,style:{top:minTop+lineTop+"px",left:-targetLeft+pos[0]+"px",height:_a-lineTop+"px"}})}),pos4.map(function(pos,i){return React.createElement("div",
{className:prefix("line","vertical","guideline","target","bold"),key:"verticalTargetGuidline"+i,style:{top:minTop+"px",left:-targetLeft+pos+"px",height:height+"px"}})}),clientRect.map(function(pos,i){return React.createElement("div",{className:prefix("line","horizontal","guideline","target","bold"),key:"horizontalTargetGuidline"+i,style:{top:-targetTop+pos+"px",left:minLeft+"px",width:width+"px"}})}),snapDirection.map(function(guideline,i){var pos=guideline.pos,size=guideline.size;return React.createElement("div",
{className:prefix("line","vertical","guideline",guideline.element?"bold":""),key:"verticalGuidline"+i,style:{top:minTop-clientTop+pos[1]+"px",left:-targetLeft+pos[0]+"px",height:size+"px"}})}),pos1.map(function(guideline,i){var pos=guideline.pos,size=guideline.size;return React.createElement("div",{className:prefix("line","horizontal","guideline",guideline.element?"bold":""),key:"horizontalGuidline"+i,style:{top:-targetTop+pos[1]+"px",left:minLeft-clientLeft+pos[0]+"px",width:size+"px"}})}))},dragStart:function(moveable,
e){moveable.state.snapDirection=!0;snapStart(moveable)},pinchStart:function(moveable){this.unset(moveable)},dragEnd:function(moveable){this.unset(moveable)},dragControlCondition:directionCondition,dragControlStart:function(moveable,e){moveable.state.snapDirection=null;snapStart(moveable)},dragControlEnd:function(moveable){this.unset(moveable)},dragGroupStart:function(moveable,e){moveable.state.snapDirection=!0;snapStart(moveable)},dragGroupEnd:function(moveable){this.unset(moveable)},dragGroupControlStart:function(moveable,
e){moveable.state.snapDirection=null;snapStart(moveable)},dragGroupControlEnd:function(moveable){this.unset(moveable)},unset:function(moveable){moveable=moveable.state;moveable.enableSnap=!1;moveable.guidelines=[];moveable.snapDirection=null}},Draggable={name:"draggable",props:{draggable:Boolean,throttleDrag:Number},dragStart:function(moveable,e){var datas=e.datas,parentEvent=e.parentEvent,state=moveable.state,targetTransform=state.targetTransform,target=state.target;if(state.dragger)return!1;state.dragger=
e.parentDragger||moveable.targetDragger;target=window.getComputedStyle(target);datas.datas={};datas.left=parseFloat(target.left||"")||0;datas.top=parseFloat(target.top||"")||0;datas.bottom=parseFloat(target.bottom||"")||0;datas.right=parseFloat(target.right||"")||0;datas.transform=targetTransform;datas.startTranslate=[0,0];setDragStart(moveable,{datas:datas});datas.prevDist=[0,0];datas.prevBeforeDist=[0,0];datas.isDrag=!1;datas.absolutePoses=getAbsolutePosesByState(moveable.state);e=fillParams(moveable,
e,{set:function(translate){datas.startTranslate=translate}});!1!==(parentEvent||moveable.triggerEvent("onDragStart",e))?datas.isDrag=!0:(state.dragger=null,datas.isPinch=!1);return datas.isDrag?e:!1},drag:function(moveable,e){var datas=e.datas,parentEvent=e.parentEvent,parentFlag=e.parentFlag,distX=e.distX,distY=e.distY,isPinch=datas.isPinch,prevDist=datas.prevDist,prevBeforeDist=datas.prevBeforeDist,transform=datas.transform,startTranslate=datas.startTranslate;if(datas.isDrag){var props=moveable.props,
parentMoveable=props.parentMoveable;props=parentEvent?0:props.throttleDrag||0;var isSnap=!1;if(!isPinch&&!parentEvent&&!parentFlag){isSnap=checkSnapDrag(moveable,distX,distY,datas);parentFlag=isSnap[0];var horizontalInfo=isSnap[1];isSnap=parentFlag.isSnap||horizontalInfo.isSnap;distX-=parentFlag.offset;distY-=horizontalInfo.offset}datas.passDistX=distX;datas.passDistY=distY;parentFlag=matrix$jscomp$0.plus(getDragDist({datas:datas,distX:distX,distY:distY},!0),startTranslate);distX=matrix$jscomp$0.plus(getDragDist({datas:datas,
distX:distX,distY:distY},!1),startTranslate);isSnap||(throttleArray(distX,props),throttleArray(parentFlag,props));distY=matrix$jscomp$0.minus(parentFlag,startTranslate);startTranslate=matrix$jscomp$0.minus(distX,startTranslate);prevDist=matrix$jscomp$0.minus(startTranslate,prevDist);prevBeforeDist=matrix$jscomp$0.minus(distY,prevBeforeDist);datas.prevDist=startTranslate;datas.prevBeforeDist=distY;props=datas.left+distY[0];isSnap=datas.top+distY[1];horizontalInfo=datas.right-distY[0];datas=datas.bottom-
distY[1];transform=transform+" translate("+startTranslate[0]+"px, "+startTranslate[1]+"px)";if(parentEvent||parentMoveable||!prevDist.every(function(num){return!num})||!prevBeforeDist.some(function(num){return!num}))return e=fillParams(moveable,e,{transform:transform,dist:startTranslate,delta:prevDist,translate:distX,beforeDist:distY,beforeDelta:prevBeforeDist,beforeTranslate:parentFlag,left:props,top:isSnap,right:horizontalInfo,bottom:datas,isPinch:isPinch}),!parentEvent&&moveable.triggerEvent("onDrag",
e),e}},dragEnd:function(moveable,e){var parentEvent=e.parentEvent,datas=e.datas,isDrag=e.isDrag;moveable.state.dragger=null;if(datas.isDrag)return datas.isDrag=!1,!parentEvent&&triggerEvent(moveable,"onDragEnd",fillParams(moveable,e,{isDrag:isDrag})),isDrag},dragGroupStart:function(moveable,e){var datas=e.datas,params=this.dragStart(moveable,e);if(!params)return!1;e=triggerChildAble(moveable,this,"dragStart",datas,e);e=__assign({},params,{targets:moveable.props.targets,events:e});moveable=moveable.triggerEvent("onDragGroupStart",
e);datas.isDrag=!1!==moveable;return datas.isDrag?params:!1},dragGroup:function(moveable,e){var datas=e.datas;if(datas.isDrag){var params=this.drag(moveable,e),_a=e.datas;e=triggerChildAble(moveable,this,"drag",datas,__assign({},e,{distX:_a.passDistX,distY:_a.passDistY}));if(params)return params=__assign({targets:moveable.props.targets,events:e},params),moveable.triggerEvent("onDragGroup",params),params}},dragGroupEnd:function(moveable,e){var isDrag=e.isDrag,datas=e.datas;if(datas.isDrag)return this.dragEnd(moveable,
e),triggerChildAble(moveable,this,"dragEnd",datas,e),triggerEvent(moveable,"onDragGroupEnd",fillParams(moveable,e,{targets:moveable.props.targets,isDrag:isDrag})),isDrag}},CustomDragger=function(){function CustomDragger(){this.startY=this.startX=this.prevY=this.prevX=0;this.isFlag=this.isDrag=!1;this.datas={}}var __proto=CustomDragger.prototype;__proto.dragStart=function(client,inputEvent){this.isFlag=this.isDrag=!1;this.datas={};return this.move(client,inputEvent)};__proto.drag=function(client,inputEvent){return this.move([client[0]-
this.prevX,client[1]-this.prevY],inputEvent)};__proto.move=function(delta,inputEvent){if(this.isFlag){var clientX=this.prevX+delta[0];var clientY=this.prevY+delta[1];this.isDrag=!0}else this.prevX=delta[0],this.prevY=delta[1],this.startX=delta[0],this.startY=delta[1],clientX=delta[0],clientY=delta[1],this.isFlag=!0;this.prevX=clientX;this.prevY=clientY;return{clientX:clientX,clientY:clientY,inputEvent:inputEvent,isDrag:this.isDrag,distX:clientX-this.startX,distY:clientY-this.startY,deltaX:delta[0],
deltaY:delta[1],datas:this.datas,parentEvent:!0,parentDragger:this}};return CustomDragger}(),Rotatable={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},render:function(moveable,React){var _a=moveable.props;if(!_a.rotatable)return null;var _b=moveable.state;moveable=_b.direction;_a=getPositions(_a.rotationPosition,_b.pos1,_b.pos2,_b.pos3,_b.pos4);moveable=getRotationRad(_a,moveable);return React.createElement("div",{key:"rotation",className:prefix("line rotation-line"),
style:{transform:"translate("+(_a[0][0]+_a[1][0])/2+"px, "+(_a[0][1]+_a[1][1])/2+"px) translateY(-40px) rotate("+moveable+"rad)"}},React.createElement("div",{className:prefix("control","rotation")}))},dragControlCondition:dragControlCondition,dragControlStart:function(moveable,e){var datas=e.datas,clientX=e.clientX,clientY=e.clientY,parentRotate=e.parentRotate,parentFlag=e.parentFlag,pinchFlag=e.pinchFlag,_a=moveable.state,left=_a.left,top=_a.top,origin=_a.origin,beforeOrigin=_a.beforeOrigin,direction=
_a.direction,beforeDirection=_a.beforeDirection,pos1=_a.pos1,pos2=_a.pos2,pos3=_a.pos3,pos4=_a.pos4;if(!_a.target)return!1;datas.transform=_a.targetTransform;datas.left=left;datas.top=top;_a=getPositions(moveable.props.rotationPosition,pos1,pos2,pos3,pos4);_a=getRotationPosition(_a,getRotationRad(_a,direction));pinchFlag||parentFlag?(datas.beforeInfo={prevDeg:parentRotate,startDeg:parentRotate,loop:0},datas.afterInfo={prevDeg:parentRotate,startDeg:parentRotate,loop:0}):(datas.afterInfo={},datas.beforeInfo=
{},setRotateStartInfo(datas.afterInfo,clientX,clientY,origin,_a),setRotateStartInfo(datas.beforeInfo,clientX,clientY,beforeOrigin,_a));datas.direction=direction;datas.beforeDirection=beforeDirection;datas.startRotate=0;datas.datas={};e=fillParams(moveable,e,{set:function(rotatation){datas.startRotate=rotatation}});moveable=moveable.triggerEvent("onRotateStart",e);datas.isRotate=!1!==moveable;return datas.isRotate?e:!1},dragControl:function(moveable,e){var datas=e.datas;var _a=e.clientX;var clientY=
e.clientY,parentRotate=e.parentRotate,parentFlag=e.parentFlag,pinchFlag=e.pinchFlag,direction=datas.direction,beforeDirection=datas.beforeDirection,beforeInfo=datas.beforeInfo,afterInfo=datas.afterInfo,startRotate=datas.startRotate;if(datas.isRotate){var _e=moveable.props,_f=_e.throttleRotate;_f=void 0===_f?0:_f;_e=_e.parentMoveable;if(pinchFlag||parentFlag){_a=getDeg(afterInfo,parentRotate,direction,startRotate,_f);parentFlag=_a[0];afterInfo=_a[1];var rotate=_a[2];_a=getDeg(beforeInfo,parentRotate,
direction,startRotate,_f);beforeInfo=_a[0];startRotate=_a[1];_a=_a[2]}else parentRotate=getDeg(afterInfo,matrix$jscomp$0.getRad(afterInfo.startAbsoluteOrigin,[_a,clientY])/Math.PI*180,direction,startRotate,_f),parentFlag=parentRotate[0],afterInfo=parentRotate[1],rotate=parentRotate[2],_a=getDeg(beforeInfo,matrix$jscomp$0.getRad(beforeInfo.startAbsoluteOrigin,[_a,clientY])/Math.PI*180,beforeDirection,startRotate,_f),beforeInfo=_a[0],startRotate=_a[1],_a=_a[2];if(parentFlag||beforeInfo||_e)return e=
fillParams(moveable,e,{delta:parentFlag,dist:afterInfo,rotate:rotate,beforeDist:startRotate,beforeDelta:beforeInfo,beforeRotate:_a,transform:datas.transform+" rotate("+afterInfo+"deg)",isPinch:!!pinchFlag}),moveable.triggerEvent("onRotate",e),e}},dragControlEnd:function(moveable,e){var datas=e.datas,isDrag=e.isDrag;if(!datas.isRotate)return!1;datas.isRotate=!1;triggerEvent(moveable,"onRotateEnd",fillParams(moveable,e,{isDrag:isDrag}));return isDrag},dragGroupControlCondition:dragControlCondition,
dragGroupControlStart:function(moveable,e){var datas=e.datas,inputEvent=e.inputEvent,_a$jscomp$0=moveable.state,parentLeft=_a$jscomp$0.left,parentTop=_a$jscomp$0.top,parentBeforeOrigin=_a$jscomp$0.beforeOrigin;_a$jscomp$0=this.dragControlStart(moveable,e);if(!_a$jscomp$0)return!1;_a$jscomp$0.set(moveable.rotation);e=triggerChildAble(moveable,this,"dragControlStart",datas,__assign({},e,{parentRotate:0}),function(child,childDatas,eventParams){var _a=child.state,beforeOrigin=_a.beforeOrigin;_a=matrix$jscomp$0.plus(matrix$jscomp$0.minus([_a.left,
_a.top],[parentLeft,parentTop]),matrix$jscomp$0.minus(beforeOrigin,parentBeforeOrigin));childDatas.prevClient=_a;eventParams.dragStart=Draggable.dragStart(child,(new CustomDragger).dragStart(_a,inputEvent))});e=__assign({},_a$jscomp$0,{targets:moveable.props.targets,events:e});moveable=moveable.triggerEvent("onRotateGroupStart",e);datas.isRotate=!1!==moveable;return datas.isRotate?_a$jscomp$0:!1},dragGroupControl:function(moveable,e){var inputEvent=e.inputEvent,datas=e.datas;if(datas.isRotate){var params=
this.dragControl(moveable,e);if(params){var rad=params.beforeDelta/180*Math.PI;e=triggerChildAble(moveable,this,"dragControl",datas,__assign({},e,{parentRotate:params.beforeDist}),function(child,childDatas,result,i){var _a=childDatas.prevClient;i=_a[0];var prevY=_a[1],_b=matrix$jscomp$0.rotate([i,prevY],rad);_a=_b[0];_b=_b[1];i=[_a-i,_b-prevY];childDatas.prevClient=[_a,_b];child=Draggable.drag(child,setCustomDrag(child.state,i,inputEvent));result.drag=child});moveable.rotation=params.beforeRotate;
params=__assign({targets:moveable.props.targets,events:e,set:function(rotation){moveable.rotation=rotation}},params);moveable.triggerEvent("onRotateGroup",params);return params}}},dragGroupControlEnd:function(moveable,e){var isDrag=e.isDrag,datas=e.datas;if(datas.isRotate)return this.dragControlEnd(moveable,e),triggerChildAble(moveable,this,"dragControlEnd",datas,e),e=fillParams(moveable,e,{targets:moveable.props.targets,isDrag:isDrag}),moveable.triggerEvent("onRotateGroupEnd",e),isDrag}},Resizable=
{name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,baseDirection:Array,keepRatio:Boolean},render:function(moveable,React){var _a=moveable.props,edge=_a.edge;if(_a.resizable)return edge?renderControls(moveable,["nw","ne","sw","se"],React):renderAllDirections(moveable,React)},dragControlCondition:directionCondition,dragControlStart:function(moveable,e){var inputEvent=e.inputEvent;var _a$jscomp$0=e.pinchFlag;var datas=e.datas,
inputTarget=inputEvent.target;inputTarget=_a$jscomp$0?[1,1]:getDirection(inputTarget);var _b=moveable.state,target=_b.target,width=_b.width;_b=_b.height;if(!inputTarget||!target)return!1;!_a$jscomp$0&&setDragStart(moveable,{datas:datas});datas.datas={};datas.direction=inputTarget;datas.startOffsetWidth=width;datas.startOffsetHeight=_b;datas.prevWidth=0;datas.prevHeight=0;_a$jscomp$0=getCSSSize(target);datas.startWidth=_a$jscomp$0[0];datas.startHeight=_a$jscomp$0[1];datas.transformOrigin=moveable.props.transformOrigin;
datas.startDirection=getStartDirection(moveable,inputTarget);datas.fixedPosition=getFixedPosition(moveable,datas.startDirection);datas.fixedOriginalPosition=getFixedPosition(moveable,inputTarget);e=fillParams(moveable,e,{direction:inputTarget,set:function(_a){var startHeight=_a[1];datas.startWidth=_a[0];datas.startHeight=startHeight},setOrigin:function(origin){datas.transformOrigin=origin},dragStart:Draggable.dragStart(moveable,(new CustomDragger).dragStart([0,0],inputEvent))});!1!==moveable.triggerEvent("onResizeStart",
e)&&(datas.isResize=!0,moveable.state.snapDirection=inputTarget);return datas.isResize?e:!1},dragControl:function(moveable,e){var datas=e.datas,distX=e.distX,distY=e.distY,parentFlag=e.parentFlag,pinchFlag=e.pinchFlag,parentDistance=e.parentDistance,parentScale=e.parentScale,inputEvent=e.inputEvent,parentKeepRatio=e.parentKeepRatio,dragClient=e.dragClient,direction=datas.direction,transformOrigin=datas.transformOrigin;if(datas.isResize){var startWidth=datas.startWidth,startHeight=datas.startHeight,
startOffsetWidth=datas.startOffsetWidth,startOffsetHeight=datas.startOffsetHeight,prevWidth=datas.prevWidth,prevHeight=datas.prevHeight,_a=moveable.props,_b=_a.throttleResize;_b=void 0===_b?0:_b;_a=_a.parentMoveable;parentKeepRatio=moveable.props.keepRatio||parentKeepRatio;var isWidth=direction[0]||!direction[1],ratio=isWidth?startOffsetHeight/startOffsetWidth:startOffsetWidth/startOffsetHeight,distWidth=0,distHeight=0;parentScale?(distWidth=(parentScale[0]-1)*startOffsetWidth,distHeight=(parentScale[1]-
1)*startOffsetHeight):pinchFlag?parentDistance&&(distWidth=parentDistance,distHeight=parentDistance*startOffsetHeight/startOffsetWidth):(distX=getDragDist({datas:datas,distX:distX,distY:distY}),distWidth=direction[0]*distX[0],distHeight=direction[1]*distX[1],parentKeepRatio&&startOffsetWidth&&startOffsetHeight&&(distY=matrix$jscomp$0.getRad([0,0],distX),parentDistance=matrix$jscomp$0.getRad([0,0],direction),distX=matrix$jscomp$0.getRad([0,0],[startOffsetWidth,startOffsetHeight]),distHeight=Math.cos(distY-
parentDistance)*Math.sqrt(distWidth*distWidth+distHeight*distHeight),direction[0]?direction[1]?(distWidth=Math.cos(distX)*distHeight,distHeight*=Math.sin(distX)):(distWidth=distHeight,distHeight=distWidth*(isWidth?ratio:1/ratio)):distWidth=distHeight*(isWidth?1/ratio:ratio)));distX=direction[0]||parentKeepRatio?Math.max(startOffsetWidth+distWidth,0):startOffsetWidth;distY=direction[1]||parentKeepRatio?Math.max(startOffsetHeight+distHeight,0):startOffsetHeight;distWidth=[0,0];pinchFlag||(distWidth=
checkSnapSize(moveable,distX,distY,direction,datas));if(parentKeepRatio)if(direction[0]&&direction[1]&&distWidth[0]&&distWidth[1]&&(Math.abs(distWidth[0])>Math.abs(distWidth[1])?distWidth[1]=0:distWidth[0]=0),(distHeight=!distWidth[0]&&!distWidth[1])&&(isWidth?distX=throttle(distX,_b):distY=throttle(distY,_b)),direction[0]&&!direction[1]||distWidth[0]&&!distWidth[1]||distHeight&&isWidth)distX+=distWidth[0],distY=distX*(isWidth?ratio:1/ratio);else{if(!direction[0]&&direction[1]||!distWidth[0]&&distWidth[1]||
distHeight&&!isWidth)distY+=distWidth[1],distX=distY*(isWidth?1/ratio:ratio)}else distX+=distWidth[0],distY+=distWidth[1],distWidth[0]||(distX=throttle(distX,_b)),distWidth[1]||(distY=throttle(distY,_b));distX=Math.round(distX);distY=Math.round(distY);distWidth=distX-startOffsetWidth;distHeight=distY-startOffsetHeight;startOffsetWidth=[distWidth-prevWidth,distHeight-prevHeight];datas.prevWidth=distWidth;datas.prevHeight=distHeight;if(_a||!startOffsetWidth.every(function(num){return!num}))return startOffsetHeight=
parentKeepRatio||parentFlag?direction:datas.startDirection,datas=dragClient||(parentKeepRatio?datas.fixedOriginalPosition:datas.fixedPosition),parentFlag=!parentFlag&&pinchFlag?[0,0]:getResizeDist(moveable,distX,distY,startOffsetHeight,datas,transformOrigin),e=fillParams(moveable,e,{width:startWidth+distWidth,height:startHeight+distHeight,offsetWidth:distX,offsetHeight:distY,direction:direction,dist:[distWidth,distHeight],delta:startOffsetWidth,isPinch:!!pinchFlag,drag:Draggable.drag(moveable,setCustomDrag(moveable.state,
parentFlag,inputEvent))}),moveable.triggerEvent("onResize",e),e}},dragControlAfter:function(moveable,e){var datas=e.datas;if(datas.isResize){var _a=moveable.state,errorWidth=_a.width-(datas.startOffsetWidth+datas.prevWidth);_a=_a.height-(datas.startOffsetHeight+datas.prevHeight);var isErrorWidth=3<Math.abs(errorWidth),isErrorHeight=3<Math.abs(_a);isErrorWidth&&(datas.startWidth+=errorWidth,datas.startOffsetWidth+=errorWidth,datas.prevWidth+=errorWidth);isErrorHeight&&(datas.startHeight+=_a,datas.startOffsetHeight+=
_a,datas.prevHeight+=_a);if(isErrorWidth||isErrorHeight)return this.dragControl(moveable,e),!0}},dragControlEnd:function(moveable,e){var datas=e.datas,isDrag=e.isDrag;if(!datas.isResize)return!1;datas.isResize=!1;e=fillParams(moveable,e,{isDrag:isDrag});moveable.triggerEvent("onResizeEnd",e);return isDrag},dragGroupControlCondition:directionCondition,dragGroupControlStart:function(moveable,e){var datas=e.datas,params=this.dragControlStart(moveable,e);if(!params)return!1;var direction=params.direction,
startPos=getPosByReverseDirection(getAbsolutePosesByState(moveable.state),direction),events=triggerChildAble(moveable,this,"dragControlStart",datas,function(child,childDatas){child=getPosByReverseDirection(getAbsolutePosesByState(child.state),direction);child=matrix$jscomp$0.caculate(matrix$jscomp$0.createRotateMatrix(-moveable.rotation/180*Math.PI,3),[child[0]-startPos[0],child[1]-startPos[1],1],3);var originalY=child[1];childDatas.originalX=child[0];childDatas.originalY=originalY;return e});events=
__assign({},params,{targets:moveable.props.targets,events:events});events=moveable.triggerEvent("onResizeGroupStart",events);datas.isResize=!1!==events;return datas.isResize?params:!1},dragGroupControl:function(moveable,e){var datas=e.datas;if(datas.isResize){var params=this.dragControl(moveable,e);if(params){var offsetWidth=params.offsetWidth,offsetHeight=params.offsetHeight,dist=params.dist,keepRatio=moveable.props.keepRatio,parentScale=[offsetWidth/(offsetWidth-dist[0]),offsetHeight/(offsetHeight-
dist[1])],fixedPosition=datas.fixedOriginalPosition;datas=triggerChildAble(moveable,this,"dragControl",datas,function(_,childDatas){_=matrix$jscomp$0.caculate(matrix$jscomp$0.createRotateMatrix(moveable.rotation/180*Math.PI,3),[childDatas.originalX*parentScale[0],childDatas.originalY*parentScale[1],1],3);return __assign({},e,{parentScale:parentScale,dragClient:matrix$jscomp$0.plus(fixedPosition,[_[0],_[1]]),parentKeepRatio:keepRatio})});params=__assign({targets:moveable.props.targets,events:datas},
params);moveable.triggerEvent("onResizeGroup",params);return params}}},dragGroupControlEnd:function(moveable,e){var isDrag=e.isDrag,datas=e.datas;if(datas.isResize)return this.dragControlEnd(moveable,e),triggerChildAble(moveable,this,"dragControlEnd",datas,e),e=fillParams(moveable,e,{targets:moveable.props.targets,isDrag:isDrag}),moveable.triggerEvent("onResizeGroupEnd",e),isDrag}},Scalable={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,
keepRatio:Boolean},render:function(moveable,React){var _a=moveable.props,scalable=_a.scalable,edge=_a.edge;if(!_a.resizable&&scalable)return edge?renderControls(moveable,["nw","ne","sw","se"],React):renderAllDirections(moveable,React)},dragControlCondition:directionCondition,dragControlStart:function(moveable,e){var datas=e.datas,pinchFlag=e.pinchFlag,inputEvent=e.inputEvent,inputTarget=inputEvent.target;inputTarget=pinchFlag?[1,1]:getDirection(inputTarget);var _a=moveable.state,width=_a.width,height=
_a.height,targetTransform=_a.targetTransform;_a=_a.target;if(!inputTarget||!_a)return!1;pinchFlag||setDragStart(moveable,{datas:datas});datas.datas={};datas.transform=targetTransform;datas.prevDist=[1,1];datas.direction=inputTarget;datas.width=width;datas.height=height;datas.startScale=[1,1];e=fillParams(moveable,e,{direction:inputTarget,set:function(scale){datas.startScale=scale},dragStart:Draggable.dragStart(moveable,(new CustomDragger).dragStart([0,0],inputEvent))});!1!==moveable.triggerEvent("onScaleStart",
e)&&(datas.isScale=!0,moveable.state.snapDirection=inputTarget);return datas.isScale?e:!1},dragControl:function(moveable,e){var datas=e.datas,distX=e.distX,distY=e.distY,parentScale=e.parentScale,parentDistance=e.parentDistance,parentKeepRatio=e.parentKeepRatio,parentFlag=e.parentFlag,pinchFlag=e.pinchFlag,inputEvent=e.inputEvent,dragClient=e.dragClient,prevDist=datas.prevDist,direction=datas.direction,width=datas.width,height=datas.height,transform=datas.transform,startScale=datas.startScale;if(!datas.isScale)return!1;
var _a=moveable.props,throttleScale=_a.throttleScale,parentMoveable=_a.parentMoveable,keepRatio=moveable.props.keepRatio||parentKeepRatio,state=moveable.state,isWidth=direction[0]||!direction[1];_a=parentKeepRatio=1;var startWidth=width*startScale[0],startHeight=height*startScale[1],ratio=isWidth?startHeight/startWidth:startWidth/startHeight;parentScale?(parentKeepRatio=parentScale[0],_a=parentScale[1]):pinchFlag?parentDistance&&(parentKeepRatio=(width+parentDistance)/width,_a=(height+parentDistance*
height/width)/height):(distX=getDragDist({datas:datas,distX:distX,distY:distY}),parentKeepRatio=direction[0]*distX[0],_a=direction[1]*distX[1],keepRatio&&width&&height&&(distX=matrix$jscomp$0.getRad([0,0],distX),distY=matrix$jscomp$0.getRad([0,0],direction),startWidth=matrix$jscomp$0.getRad([0,0],[startWidth,startHeight]),_a=Math.cos(distX-distY)*Math.sqrt(parentKeepRatio*parentKeepRatio+_a*_a),direction[0]?direction[1]?(parentKeepRatio=Math.cos(startWidth)*_a,_a*=Math.sin(startWidth)):(parentKeepRatio=
_a,_a=parentKeepRatio*(isWidth?ratio:1/ratio)):parentKeepRatio=_a*(isWidth?1/ratio:ratio)),parentKeepRatio=(width+parentKeepRatio)/width,_a=(height+_a)/height);parentKeepRatio=direction[0]?parentKeepRatio*startScale[0]:startScale[0];_a=direction[1]?_a*startScale[1]:startScale[1];0===parentKeepRatio&&(parentKeepRatio=1E-9*(0<prevDist[0]?1:-1));0===_a&&(_a=1E-9*(0<prevDist[1]?1:-1));startWidth=[parentKeepRatio/startScale[0],_a/startScale[1]];startHeight=direction;moveable.props.groupable&&(startHeight=
[(0<=startWidth[0]?1:-1)*direction[0],(0<=startWidth[1]?1:-1)*direction[1]],distX=state.snapDirection,utils.isArray(distX)&&(distX[0]||distX[1])&&(state.snapDirection=startHeight));state=[0,0];pinchFlag||(distX=startHeight,state=datas.width,startHeight=datas.height,hasGuidelines(moveable,"scalable")?(distX=checkSizeDist(moveable,scaleMatrix(datas,startWidth),state,startHeight,direction,distX,datas,datas.is3d),state=[distX[0]/state,distX[1]/startHeight]):state=[0,0]);if(keepRatio)if(direction[0]&&
direction[1]&&state[0]&&state[1]&&(Math.abs(state[0])>Math.abs(state[1])?state[1]=0:state[0]=0),(keepRatio=!state[0]&&!state[1])&&(isWidth?startWidth[0]=throttle(startWidth[0]*startScale[0],throttleScale)/startScale[0]:startWidth[1]=throttle(startWidth[1]*startScale[1],throttleScale)/startScale[1]),direction[0]&&!direction[1]||state[0]&&!state[1]||keepRatio&&isWidth)startWidth[0]+=state[0],startWidth[1]=width*startWidth[0]*startScale[0]*(isWidth?ratio:1/ratio)/height/startScale[1];else{if(!direction[0]&&
direction[1]||!state[0]&&state[1]||keepRatio&&!isWidth)startWidth[1]+=state[1],startWidth[0]=height*startWidth[1]*startScale[1]*(isWidth?1/ratio:ratio)/width/startScale[0]}else startWidth[0]+=state[0],startWidth[1]+=state[1],state[0]||(startWidth[0]=throttle(startWidth[0]*startScale[0],throttleScale)/startScale[0]),state[1]||(startWidth[1]=throttle(startWidth[1]*startScale[1],throttleScale)/startScale[1]);0===startWidth[0]&&(startWidth[0]=1E-9*(0<prevDist[0]?1:-1));0===startWidth[1]&&(startWidth[1]=
1E-9*(0<prevDist[1]?1:-1));width=[startWidth[0]/prevDist[0],startWidth[1]/prevDist[1]];startScale=[startWidth[0]*startScale[0],startWidth[1]*startScale[1]];datas.prevDist=startWidth;if(parentKeepRatio===prevDist[0]&&_a===prevDist[1]&&!parentMoveable)return!1;!parentFlag&&pinchFlag?dragClient=[0,0]:(prevDist=moveable.state,height=prevDist.left,throttleScale=prevDist.top,datas=prevDist.width,parentFlag=prevDist.height,prevDist=prevDist.is3d?4:3,isWidth=moveable.props.groupable,parentMoveable=scaleMatrix(moveable.state,
width),height=isWidth?height:0,throttleScale=isWidth?throttleScale:0,dragClient=dragClient?dragClient:getStartPos(getAbsolutePosesByState(moveable.state),direction),dragClient=getDist(dragClient,parentMoveable,datas,parentFlag,prevDist,direction),dragClient=matrix$jscomp$0.minus(dragClient,[height,throttleScale]));e=fillParams(moveable,e,{scale:startScale,direction:direction,dist:startWidth,delta:width,transform:transform+" scale("+parentKeepRatio+", "+_a+")",isPinch:!!pinchFlag,drag:Draggable.drag(moveable,
setCustomDrag(moveable.state,dragClient,inputEvent))});moveable.triggerEvent("onScale",e);return e},dragControlEnd:function(moveable,e){var datas=e.datas,isDrag=e.isDrag;if(!datas.isScale)return!1;datas.isScale=!1;triggerEvent(moveable,"onScaleEnd",fillParams(moveable,e,{isDrag:isDrag}));return isDrag},dragGroupControlCondition:directionCondition,dragGroupControlStart:function(moveable,e){var datas=e.datas,params=this.dragControlStart(moveable,e);if(!params)return!1;var direction=params.direction,
startPos=getPosByReverseDirection(getAbsolutePosesByState(moveable.state),direction),events=triggerChildAble(moveable,this,"dragControlStart",datas,function(child,childDatas){child=getPosByReverseDirection(getAbsolutePosesByState(child.state),direction);child=matrix$jscomp$0.caculate(matrix$jscomp$0.createRotateMatrix(-moveable.rotation/180*Math.PI,3),[child[0]-startPos[0],child[1]-startPos[1],1],3);var originalY=child[1];childDatas.originalX=child[0];childDatas.originalY=originalY;return e});params=
__assign({},params,{targets:moveable.props.targets,events:events});events=moveable.triggerEvent("onScaleGroupStart",params);datas.isScale=!1!==events;return datas.isScale?params:!1},dragGroupControl:function(moveable,e){var datas=e.datas;if(datas.isScale){var params=this.dragControl(moveable,e);if(params){var keepRatio=moveable.props.keepRatio,scale=params.scale,direction=params.direction,dist=params.dist,prevPos=getPosByReverseDirection(getAbsolutePosesByState(moveable.state),[direction[0]*dist[0],
direction[1]*dist[1]]);datas=triggerChildAble(moveable,this,"dragControl",datas,function(_,childDatas){_=matrix$jscomp$0.caculate(matrix$jscomp$0.createRotateMatrix(moveable.rotation/180*Math.PI,3),[childDatas.originalX*scale[0],childDatas.originalY*scale[1],1],3);return __assign({},e,{parentScale:scale,parentKeepRatio:keepRatio,dragClient:matrix$jscomp$0.plus(prevPos,[_[0],_[1]])})});params=__assign({targets:moveable.props.targets,events:datas},params);moveable.triggerEvent("onScaleGroup",params);
return params}}},dragGroupControlEnd:function(moveable,e){var isDrag=e.isDrag,datas=e.datas;if(datas.isScale)return this.dragControlEnd(moveable,e),triggerChildAble(moveable,this,"dragControlEnd",datas,e),e=fillParams(moveable,e,{targets:moveable.props.targets,isDrag:isDrag}),moveable.triggerEvent("onScaleGroupEnd",e),isDrag}},Warpable={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},render:function(moveable,React){var _a=moveable.props,scalable=_a.scalable,warpable=
_a.warpable;if(!_a.resizable&&!scalable&&warpable){scalable=moveable.state;var pos1=scalable.pos1;_a=scalable.pos2;var pos3=scalable.pos3,pos4=scalable.pos4;scalable=getMiddleLinePos(pos1,_a);warpable=getMiddleLinePos(_a,pos1);var linePosFrom3=getMiddleLinePos(pos1,pos3);pos1=getMiddleLinePos(pos3,pos1);var linePosTo1=getMiddleLinePos(pos3,pos4);pos3=getMiddleLinePos(pos4,pos3);var linePosTo3=getMiddleLinePos(_a,pos4);_a=getMiddleLinePos(pos4,_a);return[React.createElement("div",{className:prefix("line"),
key:"middeLine1",style:getLineStyle(scalable,linePosTo1)}),React.createElement("div",{className:prefix("line"),key:"middeLine2",style:getLineStyle(warpable,pos3)}),React.createElement("div",{className:prefix("line"),key:"middeLine3",style:getLineStyle(linePosFrom3,linePosTo3)}),React.createElement("div",{className:prefix("line"),key:"middeLine4",style:getLineStyle(pos1,_a)})].concat(renderAllDirections(moveable,React))}},dragControlCondition:function(target){return utils.hasClass(target,prefix("direction"))},
dragControlStart:function(moveable,e){var datas=e.datas,target=moveable.props.target,direction=getDirection(e.inputEvent.target);if(!direction||!target)return!1;target=moveable.state;var transformOrigin=target.transformOrigin,is3d=target.is3d,targetTransform=target.targetTransform,targetMatrix=target.targetMatrix,width=target.width,height=target.height,left=target.left,top=target.top;datas.datas={};datas.targetTransform=targetTransform;datas.warpTargetMatrix=is3d?targetMatrix:matrix$jscomp$0.convertDimension(targetMatrix,
3,4);datas.targetInverseMatrix=matrix$jscomp$0.ignoreDimension(matrix$jscomp$0.invert(datas.warpTargetMatrix,4),3,4);datas.direction=direction;datas.left=left;datas.top=top;setDragStart(moveable,{datas:datas});datas.poses=[[0,0],[width,0],[0,height],[width,height]].map(function(p,i){return matrix$jscomp$0.minus(p,transformOrigin)});datas.nextPoses=datas.poses.map(function(_a){return matrix$jscomp$0.caculate(datas.warpTargetMatrix,[_a[0],_a[1],0,1],4)});datas.startMatrix=matrix$jscomp$0.createIdentityMatrix(4);
datas.prevMatrix=matrix$jscomp$0.createIdentityMatrix(4);datas.absolutePoses=getAbsolutePosesByState(target);datas.posIndexes=getPosIndexesByDirection(direction);target.snapDirection=direction;e=fillParams(moveable,e,{set:function(matrix){datas.startMatrix=matrix}});!1!==moveable.triggerEvent("onWarpStart",e)&&(datas.isWarp=!0);return datas.isWarp},dragControl:function(moveable,e){var datas=e.datas,distX=e.distX,distY=e.distY,targetInverseMatrix=datas.targetInverseMatrix,prevMatrix=datas.prevMatrix,
startMatrix=datas.startMatrix,poses=datas.poses,posIndexes=datas.posIndexes,absolutePoses=datas.absolutePoses;if(!datas.isWarp)return!1;if(hasGuidelines(moveable,"warpable")){var selectedPoses=posIndexes.map(function(index){return absolutePoses[index]});1<selectedPoses.length&&selectedPoses.push([(selectedPoses[0][0]+selectedPoses[1][0])/2,(selectedPoses[0][1]+selectedPoses[1][1])/2]);selectedPoses=checkSnapPoses(moveable,selectedPoses.map(function(pos){return pos[0]+distX}),selectedPoses.map(function(pos){return pos[1]+
distY}));var verticalSnapInfo=selectedPoses.vertical;distY-=getNearestSnapGuidelineInfo(selectedPoses.horizontal).offset;distX-=getNearestSnapGuidelineInfo(verticalSnapInfo).offset}var dist=getDragDist({datas:datas,distX:distX,distY:distY},!0),nextPoses=datas.nextPoses.slice();posIndexes.forEach(function(index){nextPoses[index]=matrix$jscomp$0.plus(nextPoses[index],dist)});if(!NEARBY_POS.every(function(nearByPoses){return isValidPos(nearByPoses.map(function(i){return poses[i]}),nearByPoses.map(function(i){return nextPoses[i]}))}))return!1;
posIndexes=matrix$jscomp$0.createWarpMatrix(poses[0],poses[1],poses[2],poses[3],nextPoses[0],nextPoses[1],nextPoses[2],nextPoses[3]);if(!posIndexes.length)return!1;targetInverseMatrix=matrix$jscomp$0.convertMatrixtoCSS(matrix$jscomp$0.multiply(targetInverseMatrix,posIndexes,4));posIndexes=datas.targetTransform+" matrix3d("+targetInverseMatrix.join(",")+")";prevMatrix=matrix$jscomp$0.multiplyCSS(matrix$jscomp$0.invert(prevMatrix,4),targetInverseMatrix,4);datas.prevMatrix=targetInverseMatrix;triggerEvent(moveable,
"onWarp",fillParams(moveable,e,{delta:prevMatrix,matrix:matrix$jscomp$0.multiplyCSS(startMatrix,targetInverseMatrix,4),multiply:matrix$jscomp$0.multiplyCSS,dist:targetInverseMatrix,transform:posIndexes}));return!0},dragControlEnd:function(moveable,e){var datas=e.datas,isDrag=e.isDrag;if(!datas.isWarp)return!1;datas.isWarp=!1;triggerEvent(moveable,"onWarpEnd",fillParams(moveable,e,{isDrag:isDrag}));return isDrag}},AREA=prefix("area"),AREA_PIECES=prefix("area-pieces"),AREA_PIECE=prefix("area-piece"),
AVOID=prefix("avoid"),MOVEABLE_ABLES=[{name:"",props:{target:Object,container:Object,dragArea:Boolean,origin:Boolean,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number}},Snappable,Pinchable,Draggable,Rotatable,Resizable,Scalable,Warpable,{name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number},dragStart:function(moveable,e){var _a=moveable.props.scrollContainer;moveable=void 0===_a?moveable.getContainer():_a;_a=moveable.getBoundingClientRect();
e=e.datas;e.scrollContainer=moveable;e.scrollRect={left:_a.left,top:_a.top,width:_a.width,height:_a.height};e.isScroll=!0},drag:function(moveable,e){this.checkScroll(moveable,e)},dragEnd:function(moveable,e){e.datas.isScroll=!1},dragGroupStart:function(moveable,e){this.dragStart(moveable,e)},dragGroup:function(moveable,e){this.drag(moveable,__assign({},e,{targets:moveable.props.targets}))},dragGroupEnd:function(moveable,e){this.dragEnd(moveable,e)},checkScroll:function(moveable,e){var datas=e.datas,
inputEvent=e.inputEvent,clientX=e.clientX,clientY=e.clientY,targets=e.targets;if(datas.isScroll){e.isScroll||(datas.prevClientX=clientX,datas.prevClientY=clientY);var _a=moveable.props,_b=_a.scrollThreshold;_b=void 0===_b?0:_b;_a=_a.getScrollPosition;var getScrollPosition=void 0===_a?getDefaultScrollPosition:_a,scrollContainer=datas.scrollContainer;_a=datas.scrollRect;var direction=[0,0];_a.top>clientY-_b?direction[1]=-1:_a.top+_a.height<clientY+_b&&(direction[1]=1);_a.left>clientX-_b?direction[0]=
-1:_a.left+_a.width<clientX+_b&&(direction[0]=1);if(direction[0]||direction[1]){var pos=getScrollPosition({scrollContainer:scrollContainer,direction:direction});e=fillParams(moveable,e,{scrollContainer:scrollContainer,direction:direction});targets&&(e.targets=targets);moveable.triggerEvent(targets?"onScrollGroup":"onScroll",e);requestAnimationFrame(function(){if(datas.prevClientX===clientX&&datas.prevClientY===clientY){var nextPos=getScrollPosition({scrollContainer:scrollContainer,direction:direction}),
offsetX=nextPos[0]-pos[0];nextPos=nextPos[1]-pos[1];if(offsetX||nextPos)moveable.targetDragger.scrollBy(direction[0]?offsetX:0,direction[1]?nextPos:0,inputEvent,!1),setTimeout(function(){if(datas.prevClientX===clientX&&datas.prevClientY===clientY)moveable.targetDragger.onDrag(inputEvent,!0)},10)}})}}}},{name:"dragArea",props:{dragArea:Boolean},render:function(moveable,React){var _a=moveable.props,target=_a.target,dragArea=_a.dragArea,_b=moveable.state,width=_b.width,height=_b.height,pos1=_b.pos1,
pos2=_b.pos2,pos3=_b.pos3;_b=_b.pos4;if(_a.groupable)return[React.createElement("div",{key:"area",ref:frameworkUtils.ref(moveable,"areaElement"),className:AREA}),renderPieces(React)];if(!target||!dragArea)return[];_a=matrix$jscomp$0.createWarpMatrix([0,0],[width,0],[0,height],[width,height],pos1,pos2,pos3,_b);_a=_a.length?"matrix3d("+matrix$jscomp$0.convertMatrixtoCSS(_a).join(",")+")":"none";return[React.createElement("div",{key:"area",ref:frameworkUtils.ref(moveable,"areaElement"),className:AREA,
style:{top:"0px",left:"0px",width:width+"px",height:height+"px",transformOrigin:"0 0",transform:_a}}),renderPieces(React)]},dragStart:function(moveable,_a){var datas=_a.datas,clientX=_a.clientX,clientY=_a.clientY;_a=_a.inputEvent;datas.isDragArea=!1;datas.inputTarget=_a.target;datas=moveable.areaElement;var _b=moveable.state,clientRect=_b.clientRect,left=clientRect.left;_a=clientRect.top;moveable=clientRect.width;clientRect=clientRect.height;var _c=getRect([_b.pos1,_b.pos2,_b.pos3,_b.pos4]);_b=_c.left;
_c=_c.top;clientX-=left;clientY-=_a;clientY=[{left:_b,top:_c,width:moveable,height:clientY-10},{left:_b,top:_c,width:clientX-10,height:clientRect},{left:_b,top:_c+clientY+10,width:moveable,height:clientRect-clientY-10},{left:_b+clientX+10,top:_c,width:moveable-clientX-10,height:clientRect}];var children=[].slice.call(datas.nextElementSibling.children);clientY.forEach(function(rect,i){children[i].style.cssText="left: "+rect.left+"px;top: "+rect.top+"px; width: "+rect.width+"px; height: "+rect.height+
"px;"});utils.addClass(datas,AVOID)},drag:function(moveable,_a){_a=_a.datas;_a.isDragArea||(_a.isDragArea=!0,restoreStyle(moveable))},dragEnd:function(moveable,e){var inputEvent=e.inputEvent,isDragArea=e.isDragArea;e.datas.isDragArea||restoreStyle(moveable);var target=moveable.state.target;inputEvent=inputEvent.target;isDragArea||moveable.isMoveableElement(inputEvent)||(isDragArea=target.contains(inputEvent),triggerEvent(moveable,"onClick",fillParams(moveable,e,{inputTarget:inputEvent,isTarget:target===
inputEvent,containsTarget:isDragArea})))},dragGroupStart:function(moveable,e){this.dragStart(moveable,e)},dragGroup:function(moveable,e){this.drag(moveable,e)},dragGroupEnd:function(moveable,e){var inputEvent=e.inputEvent,isDragArea=e.isDragArea,datas=e.datas;isDragArea||restoreStyle(moveable);datas=datas.inputTarget;var inputTarget=inputEvent.target;if(!isDragArea&&!moveable.isMoveableElement(inputTarget)&&datas!==inputTarget){inputEvent=moveable.props.targets;isDragArea=inputEvent.indexOf(inputTarget);
datas=-1<isDragArea;var containsTarget=!1;-1===isDragArea&&(isDragArea=utils.findIndex(inputEvent,function(parentTarget){return parentTarget.contains(inputTarget)}),containsTarget=-1<isDragArea);triggerEvent(moveable,"onClickGroup",fillParams(moveable,e,{targets:inputEvent,inputTarget:inputTarget,targetIndex:isDragArea,isTarget:datas,containsTarget:containsTarget}))}}},{name:"origin",props:{origin:Boolean},render:function(moveable,React){if(!moveable.props.origin)return null;var _a=moveable.state;
moveable=_a.beforeOrigin;_a=_a.rotation;return[React.createElement("div",{className:prefix("control","origin"),style:getControlTransform(_a,moveable),key:"beforeOrigin"})]}}],Groupable={name:"groupable",props:{defaultGroupRotate:Number,groupable:Boolean},render:function(moveable,React){var targets=moveable.props.targets||[];moveable.moveables=[];var _a=moveable.state,position={left:_a.left,top:_a.top};return targets.map(function(target,i){return React.createElement(MoveableManager,{key:i,ref:frameworkUtils.refs(moveable,
"moveables",i),target:target,origin:!1,parentMoveable:moveable,parentPosition:position})}).slice()}},MoveableGroup=function(_super){function MoveableGroup(){var _this=null!==_super&&_super.apply(this,arguments)||this;_this.differ=new ChildrenDiffer;_this.moveables=[];_this.rotation=0;return _this}__extends(MoveableGroup,_super);var __proto=MoveableGroup.prototype;__proto.updateEvent=function(prevProps){var state=this.state,props=this.props;state.target||(state.target=this.areaElement,this.controlBox.getElement().style.display=
"block",this.targetDragger=getAbleDragger(this,state.target,"targetAbles","Group"),this.controlDragger=getAbleDragger(this,this.controlBox.getElement(),"controlAbles","GroupControl"));if(prevProps=!equals(prevProps.container,props.container))state.container=props.container;var _a=this.differ.update(props.targets);state=_a.added;props=_a.changed;_a=_a.removed;(prevProps||state.length||props.length||_a.length)&&this.updateRect()};__proto.checkUpdate=function(){this.updateAbles()};__proto.updateRect=
function(type,isTarget,isSetState){void 0===isSetState&&(isSetState=!0);if(this.controlBox){this.moveables.forEach(function(moveable){moveable.updateRect(type,!1,!1)});var state=this.state,props=this.props,target=state.target||props.target;if(!isTarget||""!==type&&props.updateGroup)this.rotation=props.defaultGroupRotate;var _a=this.rotation;var _b=getGroupRect(this.moveables,_a);isTarget=_b[0];props=_b[1];var width=_b[2];_b=_b[3];target.style.cssText+="left:0px;top:0px;width:"+width+"px; height:"+
_b+"px;transform:rotate("+_a+"deg)";state.width=width;state.height=_b;target=getTargetInfo(target,this.controlBox.getElement(),this.getContainer(),state);width=[target.left,target.top];_a=getAbsolutePosesByState(target);target.pos1=_a[0];target.pos2=_a[1];target.pos3=_a[2];target.pos4=_a[3];target.origin=matrix$jscomp$0.plus(width,target.origin);target.beforeOrigin=matrix$jscomp$0.plus(width,target.beforeOrigin);_a=target.clientRect;_a.top+=props-target.top-state.top;_a.left+=isTarget-target.left-
state.left;this.updateState(__assign({},target,{left:isTarget-target.left,top:props-target.top}),isSetState)}};__proto.triggerEvent=function(name,e){if(-1<name.indexOf("Group"))return _super.prototype.triggerEvent.call(this,name,e)};__proto.updateAbles=function(){_super.prototype.updateAbles.call(this,this.props.ables.concat([Groupable]),"Group")};MoveableGroup.defaultProps=__assign({},MoveableManager.defaultProps,{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0});
return MoveableGroup}(MoveableManager),Moveable=function(_super){function Moveable(){return null!==_super&&_super.apply(this,arguments)||this}__extends(Moveable,_super);var __proto=Moveable.prototype;__proto.render=function(){var ables=this.props.ables||[],target=this.props.target||this.props.targets,isArr=utils.isArray(target);if(isArr&&1<target.length)return ables=__assign({},this.props,{target:null,targets:target,ables:MOVEABLE_ABLES.concat([Groupable],ables)}),React$jscomp$0.createElement(MoveableGroup,
__assign({key:"group",ref:frameworkUtils.ref(this,"moveable")},ables));target=isArr?target[0]:target;return React$jscomp$0.createElement(MoveableManager,__assign({key:"single",ref:frameworkUtils.ref(this,"moveable")},__assign({},this.props,{target:target,ables:MOVEABLE_ABLES.concat(ables)})))};__proto.isMoveableElement=function(target){return this.moveable.isMoveableElement(target)};__proto.dragStart=function(e){this.moveable.dragStart(e)};__proto.isInside=function(clientX,clientY){return this.moveable.isInside(clientX,
clientY)};__proto.updateRect=function(){this.moveable.updateRect()};__proto.updateTarget=function(){this.moveable.updateTarget()};__proto.getRect=function(){return this.moveable.getRect()};__proto.destroy=function(){this.moveable.componentWillUnmount()};return Moveable}(React$jscomp$0.PureComponent);module.exports=Moveable}
//# sourceMappingURL=module$node_modules$react_moveable$dist$moveable_cjs.js.map
