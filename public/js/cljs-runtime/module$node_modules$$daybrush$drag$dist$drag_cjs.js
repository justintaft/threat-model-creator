shadow$provide.module$node_modules$$daybrush$drag$dist$drag_cjs=function(global,require,module,exports){function getPinchDragPosition(clients,prevClients,startClients,startPinchClients){clients=getAverageClient(clients);prevClients=getAverageClient(prevClients);var startCenter=getAverageClient(startPinchClients);clients=getAddClient(startPinchClients[0],{clientX:clients.clientX-startCenter.clientX,clientY:clients.clientY-startCenter.clientY});startPinchClients=getAddClient(startPinchClients[0],{clientX:prevClients.clientX-
startCenter.clientX,clientY:prevClients.clientY-startCenter.clientY});return getPosition(clients,startPinchClients,startClients[0])}function getPositionEvent(e){return e.touches?getClients(e.touches):[getClient(e)]}function getPosition(client,prevClient,startClient){var clientX=client.clientX;client=client.clientY;return{clientX:clientX,clientY:client,deltaX:clientX-prevClient.clientX,deltaY:client-prevClient.clientY,distX:clientX-startClient.clientX,distY:client-startClient.clientY}}function getDist(clients){return Math.sqrt(Math.pow(clients[0].clientX-
clients[1].clientX,2)+Math.pow(clients[0].clientY-clients[1].clientY,2))}function getPositions(clients,prevClients,startClients){return clients.map(function(client,i){return getPosition(client,prevClients[i],startClients[i])})}function getClients(touches){for(var length=Math.min(touches.length,2),clients=[],i=0;i<length;++i)clients.push(getClient(touches[i]));return clients}function getClient(e){return{clientX:e.clientX,clientY:e.clientY}}function getAverageClient(clients){return{clientX:(clients[0].clientX+
clients[1].clientX)/2,clientY:(clients[0].clientY+clients[1].clientY)/2}}function getAddClient(client1,client2){return{clientX:client1.clientX+client2.clientX,clientY:client1.clientY+client2.clientY}}var utils=require("module$node_modules$$daybrush$utils$dist$utils"),__assign=function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t};return __assign.apply(this,arguments)},Dragger=
function(){function Dragger(el,options){var _this=this;void 0===options&&(options={});this.el=el;this.options={};this.pinchFlag=this.flag=!1;this.datas={};this.isTouch=this.isMouse=this.isPinch=this.isDrag=!1;this.prevClients=[];this.startClients=[];this.movement=0;this.startPinchClients=[];this.startDistance=0;this.customDist=[0,0];this.onDragStart=function(e){if(_this.flag||!1!==e.cancelable){if(e.touches&&2<=e.touches.length){if(!_this.flag&&e.touches.length!==e.changedTouches.length)return;if(!_this.pinchFlag)_this.onPinchStart(e)}if(!_this.flag){var clients=
_this.startClients[0]?_this.startClients:getPositionEvent(e);_this.customDist=[0,0];_this.flag=!0;_this.isDrag=!1;_this.startClients=clients;_this.prevClients=clients;_this.datas={};_this.movement=0;clients=getPosition(clients[0],_this.prevClients[0],_this.startClients[0]);var _a=_this.options,dragstart=_a.dragstart;if(_a.preventRightClick&&3===e.which||!1===(dragstart&&dragstart(__assign({datas:_this.datas,inputEvent:e},clients))))_this.startClients=[],_this.prevClients=[],_this.flag=!1;_this.flag&&
e.preventDefault()}}};this.onDrag=function(e,isScroll){if(_this.flag){var clients=getPositionEvent(e);if(_this.pinchFlag)_this.onPinch(e,clients);if((clients=_this.move([0,0],e,clients))&&(clients.deltaX||clients.deltaY)){var drag=_this.options.drag;drag&&drag(__assign({},clients,{isScroll:!!isScroll,inputEvent:e}))}}};this.onDragEnd=function(e){if(_this.flag){if(_this.pinchFlag)_this.onPinchEnd(e);_this.flag=!1;var dragend=_this.options.dragend,prevClients=_this.prevClients,startClients=_this.startClients;
prevClients=_this.pinchFlag?getPinchDragPosition(prevClients,prevClients,startClients,_this.startPinchClients):getPosition(prevClients[0],prevClients[0],startClients[0]);_this.startClients=[];_this.prevClients=[];dragend&&dragend(__assign({datas:_this.datas,isDrag:_this.isDrag,inputEvent:e},prevClients))}};var _a$jscomp$0=this.options=__assign({container:el,preventRightClick:!0,pinchThreshold:0,events:["touch","mouse"]},options);options=_a$jscomp$0.container;_a$jscomp$0=_a$jscomp$0.events;this.isTouch=
-1<_a$jscomp$0.indexOf("touch");this.isMouse=-1<_a$jscomp$0.indexOf("mouse");this.customDist=[0,0];this.isMouse&&(utils.addEvent(el,"mousedown",this.onDragStart),utils.addEvent(options,"mousemove",this.onDrag),utils.addEvent(options,"mouseup",this.onDragEnd));this.isTouch&&(_a$jscomp$0={passive:!1},utils.addEvent(el,"touchstart",this.onDragStart,_a$jscomp$0),utils.addEvent(options,"touchmove",this.onDrag,_a$jscomp$0),utils.addEvent(options,"touchend",this.onDragEnd,_a$jscomp$0))}var __proto=Dragger.prototype;
__proto.isDragging=function(){return this.isDrag};__proto.isPinching=function(){return this.isPinch};__proto.scrollBy=function(deltaX,deltaY,e,isCallDrag){void 0===isCallDrag&&(isCallDrag=!0);this.flag&&(this.startClients.forEach(function(client){client.clientX-=deltaX;client.clientY-=deltaY}),this.prevClients.forEach(function(client){client.clientX-=deltaX;client.clientY-=deltaY}),isCallDrag&&this.onDrag(e,!0))};__proto.move=function(_a,inputEvent,clients){var deltaX=_a[0],deltaY=_a[1];void 0===
clients&&(clients=this.prevClients);_a=this.customDist;var prevClients=this.prevClients,startClients=this.startClients;prevClients=this.pinchFlag?getPinchDragPosition(clients,prevClients,startClients,this.startPinchClients):getPosition(clients[0],prevClients[0],startClients[0]);_a[0]+=deltaX;_a[1]+=deltaY;prevClients.deltaX+=deltaX;prevClients.deltaY+=deltaY;deltaX=prevClients.deltaX;deltaY=prevClients.deltaY;prevClients.distX+=_a[0];prevClients.distY+=_a[1];this.movement+=Math.sqrt(deltaX*deltaX+
deltaY*deltaY);this.prevClients=clients;this.isDrag=!0;return __assign({datas:this.datas},prevClients,{isScroll:!1,inputEvent:inputEvent})};__proto.onPinchStart=function(e){var _a,_b,_c=this.options,pinchstart=_c.pinchstart;_c=_c.pinchThreshold;this.isDrag&&this.movement>_c||(_c=getClients(e.changedTouches),this.pinchFlag=!0,(_a=this.startClients).push.apply(_a,_c),(_b=this.prevClients).push.apply(_b,_c),this.startDistance=getDist(this.prevClients),this.startPinchClients=this.prevClients.slice(),
pinchstart&&(_a=this.prevClients,_b=getAverageClient(_a),_b=getPosition(_b,_b,_b),pinchstart(__assign({datas:this.datas,touches:getPositions(_a,_a,_a)},_b,{inputEvent:e}))))};__proto.onPinch=function(e,clients){if(this.flag&&this.pinchFlag){this.isPinch=!0;var pinch=this.options.pinch;if(pinch){var prevClients=this.prevClients,startClients=this.startClients,centerPosition=getPosition(getAverageClient(clients),getAverageClient(prevClients),getAverageClient(startClients)),distance=getDist(clients);
pinch(__assign({datas:this.datas,touches:getPositions(clients,prevClients,startClients),scale:distance/this.startDistance,distance:distance},centerPosition,{inputEvent:e}))}}};__proto.onPinchEnd=function(e){if(this.flag&&this.pinchFlag){var isPinch=this.isPinch;this.pinchFlag=this.isPinch=!1;var pinchend=this.options.pinchend;if(pinchend){var prevClients=this.prevClients,startClients=this.startClients,centerPosition=getPosition(getAverageClient(prevClients),getAverageClient(prevClients),getAverageClient(startClients));
pinchend(__assign({datas:this.datas,isPinch:isPinch,touches:getPositions(prevClients,prevClients,startClients)},centerPosition,{inputEvent:e}));this.pinchFlag=this.isPinch=!1}}};__proto.unset=function(){var el=this.el,container=this.options.container;this.isMouse&&(utils.removeEvent(el,"mousedown",this.onDragStart),utils.removeEvent(container,"mousemove",this.onDrag),utils.removeEvent(container,"mouseup",this.onDragEnd));this.isTouch&&(utils.removeEvent(el,"touchstart",this.onDragStart),utils.removeEvent(container,
"touchmove",this.onDrag),utils.removeEvent(container,"touchend",this.onDragEnd))};return Dragger}();global={"default":Dragger,drag:function(el,options){return new Dragger(el,options)}};for(var name in global)Dragger[name]=global[name];module.exports=Dragger}
//# sourceMappingURL=module$node_modules$$daybrush$drag$dist$drag_cjs.js.map
